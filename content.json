{"meta":{"title":"éšç¬”","subtitle":"æŠ€æœ¯ | ç”Ÿæ´»","description":"å±ˆå­æ³ªï¼Œç¦»æ­Œèµ·ï¼ŒåŠ›æ‹”å±±å…®","author":"Jack","url":"https://mrzzcn.github.io"},"posts":[{"title":"React-Redux (1): @connect","slug":"react-redux-1-connect","date":"2019-07-20","updated":"2019-07-22","comments":true,"path":"2019/07/20/react-redux-1-connect/","link":"","permalink":"https://mrzzcn.github.io/2019/07/20/react-redux-1-connect/","excerpt":"","text":"0 ç¼˜èµ·ä¹‹å‰æœ‰æ¬¡é¢è¯•è¢«é—®èµ· connect æ–¹æ³•æ˜¯å¦‚ä½•æŠŠ store çš„ state ä¼ é€’åˆ° Component çš„ï¼Œå½“æ—¶æ²¡æœ‰å›ç­”åˆ°ç‚¹å­ä¸Šï¼Œæ‹–åˆ°ç°åœ¨ç»ˆäºå¼ºè¿«è‡ªå·±åä¸‹æ¥ææ¸…æ¥šè¿™ä¸ªäº‹æƒ…ã€‚ 1 APIå…ˆçœ‹çœ‹å®˜æ–¹æ–‡æ¡£å…³äº connect() æ–¹æ³•çš„è¯´æ˜ï¼šConnect Â· React Redux | ä¸­æ–‡ç‰ˆ å¤§æ¦‚ç¿»è¯‘ä¸€ä¸‹ï¼šconnect() æ–¹æ³•æŠŠä¸€ä¸ª React ç»„ä»¶ç»‘å®šåˆ° Redux store ä¸Šã€‚æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œæ–°ç»„ä»¶åŒ…å«æ‰€æœ‰ä¼ å…¥ç»„ä»¶éœ€è¦ä» store ä¸Šè·å–çš„æ•°æ®æˆ–è€…å‘ store è§¦å‘çš„æ–¹æ³•connect ä¸ä¼šä¿®æ”¹ç»„ä»¶ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ç»‘å®šç»„ä»¶åŒ…è£¹åŸç»„ä»¶ã€‚1function connect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?) æ›´å¤šå†…å®¹è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ 2 å®ç°é‚£ä¹ˆ connect åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé€šè¿‡æºç çœ‹ä¸€ä¸‹:æºä»£ç ä½äºï¼šgithub.com/reduxjs/react-redux/connect/connect.jsè¿™é‡Œå¯¹ connect çš„å‚æ•°è¿›è¡Œäº†ä¸€ä¸ªé»˜è®¤å€¼å¤„ç†ï¼Œæ²¡æœ‰æ¶‰åŠæ ¸å¿ƒåŠŸèƒ½ï¼Œç»§ç»­è°ƒç”¨äº† connectAdvancedï¼šgithub.com/reduxjs/react-redux/components/connectAdvanced.jsæ–¹æ³•å¾ˆé•¿ï¼Œå‰é¢éƒ½æ˜¯å¯¹ä¸€äº›è¿‡æœŸé€‰é¡¹çš„è­¦å‘Šå’Œä¸€äº›å€¼çš„å¤„ç†ã€‚æ ¸å¿ƒä»£ç ä½äº ConnectFunction å†…éƒ¨ç¬¬ 171 è¡Œå¤„ è·å–åˆ°å½“å‰ä½¿ç”¨çš„ context123456789101112const ContextToUse = useMemo(() =&gt; &#123; // Users may optionally pass in a custom context instance to use instead of our ReactReduxContext. // Memoize the check that determines which context instance we should use. return propsContext &amp;&amp; propsContext.Consumer &amp;&amp; isContextConsumer(&lt;propsContext.Consumer /&gt;) ? propsContext : Context &#125;, [propsContext, Context])// Retrieve the store and ancestor subscription via context, if availableconst contextValue = useContext(ContextToUse) ç¬¬ 385 è¡Œå¤„ï¼Œæ‰§è¡Œäº†å…·ä½“çš„ connect è¿‡ç¨‹1234567891011121314151617181920212223242526 // Now that all that's done, we can finally try to actually render the child component. // We memoize the elements for the rendered child component as an optimization. const renderedWrappedComponent = useMemo( () =&gt; &lt;WrappedComponent &#123;...actualChildProps&#125; ref=&#123;forwardedRef&#125; /&gt;, [forwardedRef, WrappedComponent, actualChildProps] ) // If React sees the exact same element reference as last time, it bails out of re-rendering // that child, same as if it was wrapped in React.memo() or returned false from shouldComponentUpdate. const renderedChild = useMemo(() =&gt; &#123; if (shouldHandleStateChanges) &#123; // If this component is subscribed to store updates, we need to pass its own // subscription instance down to our descendants. That means rendering the same // Context instance, and putting a different value into the context. return ( &lt;ContextToUse.Provider value=&#123;overriddenContextValue&#125;&gt; &#123;renderedWrappedComponent&#125; &lt;/ContextToUse.Provider&gt; ) &#125; return renderedWrappedComponent &#125;, [ContextToUse, renderedWrappedComponent, overriddenContextValue]) return renderedChild&#125; å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®åº•å±‚å°±æ˜¯ä½¿ç”¨ Context.Provider å‘è¢«ç»‘å®šçš„ç»„ä»¶æ³¨å…¥éœ€è¦çš„å±æ€§(åŒ…æ‹¬ mapStateToProps å’Œ dispatchç›¸å…³æ–¹æ³•)ã€‚ 3 è¸©å‘æœ€åˆçœ‹ä»£ç çš„æ—¶å€™æä¸æ¸…æ¥š ReactReduxContext è¿™ä¸ª Context æ˜¯å¦‚ä½•è·Ÿå¤–å±‚çš„ store å…³è”èµ·æ¥çš„ï¼Œå› ä¸ºæ¼æ‰äº†æœ€å¤–å±‚çš„ Provider https://react-redux.js.org/api/providerã€‚react-redux æä¾›ä¸¤ç§å¼•ç”¨æ–¹å¼ï¼šåœ¨æœ€å¤–å±‚ä½¿ç”¨ react-redux æä¾›çš„ Provider ç»„ä»¶åŒ…è£¹ æˆ–è€… æ¯æ¬¡ connect æ—¶å€™éƒ½è¦ä¼ å…¥ context å®ä¾‹çš„æ–¹å¼ï¼Œä»¥æ­¤ä¿è¯å”¯ä¸€æ•°æ®æºã€‚ 4 å…¶ä»–æ•´ä¸ªå®ç°è¿‡ç¨‹éå¸¸å·§å¦™ï¼ŒåŒ…æ‹¬ä¸€äº›é»˜è®¤å€¼çš„å¤„ç†ï¼Œä¸€äº›æ–¹æ³•é‡è½½çš„å®ç°ï¼Œéå¸¸å€¼å¾—å‚è€ƒã€‚","categories":[{"name":"React","slug":"React","permalink":"https://mrzzcn.github.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://mrzzcn.github.io/tags/React/"},{"name":"React Redux","slug":"React-Redux","permalink":"https://mrzzcn.github.io/tags/React-Redux/"},{"name":"connect","slug":"connect","permalink":"https://mrzzcn.github.io/tags/connect/"}]},{"title":"ä½¿ç”¨ Heroku å’Œ mongoDB Atlas å…è´¹æ‰˜ç®¡ YApi","slug":"host-yapi-with-heroku-and-mongodb-atlas","date":"2019-04-27","updated":"2019-04-27","comments":true,"path":"2019/04/27/host-yapi-with-heroku-and-mongodb-atlas/","link":"","permalink":"https://mrzzcn.github.io/2019/04/27/host-yapi-with-heroku-and-mongodb-atlas/","excerpt":"0. èƒŒæ™¯å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸åç«¯çº¦å®šæ¥å£æ ‡å‡†ä¹‹åï¼ŒåŒæ–¹åŒæ—¶å¼€å§‹å¼€å‘ï¼Œå¯èƒ½ä¼šå‡ºç°åç«¯æ²¡æœ‰ Readyï¼Œä½†æ˜¯å‰ç«¯å·²ç»éœ€è¦ä½¿ç”¨æ¥å£çš„æƒ…å†µã€‚è¿™æ—¶å€™å°±éœ€è¦ Fake æ¥å£ã€‚æœ‰å‡ ç§æ–¹å¼ï¼š ä¼˜ç‚¹ ç¼ºç‚¹ 1. é¡¹ç›®ä¸­ä½¿ç”¨ Fake Promise æ–¹ä¾¿å¿«é€Ÿ ä¸èƒ½æ¨¡æ‹ŸçœŸå®ç½‘ç»œè¯·æ±‚ï¼Œå¯¹ä»£ç æœ‰ä¾µå…¥ï¼Œéœ€è¦åœ¨ webpack ä¸­é…ç½®è·¯å¾„æ›¿æ¢æˆ–æ‰‹åŠ¨åˆ‡æ¢æ–‡ä»¶ 2. é¡¹ç›®ä¸­ä½¿ç”¨ mockjs ç­‰æœåŠ¡ç«¯æ–¹å¼å¯åŠ¨è‡ªæ‰˜ç®¡ mock server æ–¹ä¾¿å¿«é€Ÿï¼ŒçœŸå®ç½‘ç»œè¯·æ±‚ å¢åŠ é¡¹ç›®ä½“ç§¯ï¼Œä¸åˆ©äºå¤šé¡¹ç›®å…±äº«åŸºç¡€è®¾æ–½ï¼Œè€—è´¹å¼€å‘æœåŠ¡å™¨æ€§èƒ½ 3. ä½¿ç”¨å•ç‹¬çš„ mock server çœŸå®ç½‘ç»œè¯·æ±‚ï¼Œå¯é›†æˆåç«¯æ¥å£æµ‹è¯•ï¼ŒTS ä»£ç æ¨¡æ¿ç­‰åŠŸèƒ½ éœ€è¦èŠ±ç¨å¤šæ—¶é—´ç»´æŠ¤æ¥å£ è¿™é‡Œä»‹ç»ä¸€ä¸‹ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼çš„ä¸€ä¸ªå®ç°æ–¹æ³•ï¼šYApiï¼Œå¯ä»¥å»è¿™é‡Œä½“éªŒã€‚YApi æ˜¯ node + mongoDB é¡¹ç›®ï¼Œæœ¬ç¯‡ä»‹ç»ä¸€ä¸‹è‡ªå·±ä½¿ç”¨ Heroku å’Œ mongoDB Atlas å…è´¹éƒ¨ç½² YApi çš„è¿‡ç¨‹ã€‚ 1. æ³¨å†Œå¸å·https://cloud.mongodb.com/ æä¾›å…è´¹çš„ mongoDB æ•°æ®åº“æœåŠ¡https://www.heroku.com/ æä¾›å…è´¹çš„ node ç¨‹åºæ‰˜ç®¡æœåŠ¡","text":"0. èƒŒæ™¯å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸åç«¯çº¦å®šæ¥å£æ ‡å‡†ä¹‹åï¼ŒåŒæ–¹åŒæ—¶å¼€å§‹å¼€å‘ï¼Œå¯èƒ½ä¼šå‡ºç°åç«¯æ²¡æœ‰ Readyï¼Œä½†æ˜¯å‰ç«¯å·²ç»éœ€è¦ä½¿ç”¨æ¥å£çš„æƒ…å†µã€‚è¿™æ—¶å€™å°±éœ€è¦ Fake æ¥å£ã€‚æœ‰å‡ ç§æ–¹å¼ï¼š ä¼˜ç‚¹ ç¼ºç‚¹ 1. é¡¹ç›®ä¸­ä½¿ç”¨ Fake Promise æ–¹ä¾¿å¿«é€Ÿ ä¸èƒ½æ¨¡æ‹ŸçœŸå®ç½‘ç»œè¯·æ±‚ï¼Œå¯¹ä»£ç æœ‰ä¾µå…¥ï¼Œéœ€è¦åœ¨ webpack ä¸­é…ç½®è·¯å¾„æ›¿æ¢æˆ–æ‰‹åŠ¨åˆ‡æ¢æ–‡ä»¶ 2. é¡¹ç›®ä¸­ä½¿ç”¨ mockjs ç­‰æœåŠ¡ç«¯æ–¹å¼å¯åŠ¨è‡ªæ‰˜ç®¡ mock server æ–¹ä¾¿å¿«é€Ÿï¼ŒçœŸå®ç½‘ç»œè¯·æ±‚ å¢åŠ é¡¹ç›®ä½“ç§¯ï¼Œä¸åˆ©äºå¤šé¡¹ç›®å…±äº«åŸºç¡€è®¾æ–½ï¼Œè€—è´¹å¼€å‘æœåŠ¡å™¨æ€§èƒ½ 3. ä½¿ç”¨å•ç‹¬çš„ mock server çœŸå®ç½‘ç»œè¯·æ±‚ï¼Œå¯é›†æˆåç«¯æ¥å£æµ‹è¯•ï¼ŒTS ä»£ç æ¨¡æ¿ç­‰åŠŸèƒ½ éœ€è¦èŠ±ç¨å¤šæ—¶é—´ç»´æŠ¤æ¥å£ è¿™é‡Œä»‹ç»ä¸€ä¸‹ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼çš„ä¸€ä¸ªå®ç°æ–¹æ³•ï¼šYApiï¼Œå¯ä»¥å»è¿™é‡Œä½“éªŒã€‚YApi æ˜¯ node + mongoDB é¡¹ç›®ï¼Œæœ¬ç¯‡ä»‹ç»ä¸€ä¸‹è‡ªå·±ä½¿ç”¨ Heroku å’Œ mongoDB Atlas å…è´¹éƒ¨ç½² YApi çš„è¿‡ç¨‹ã€‚ 1. æ³¨å†Œå¸å·https://cloud.mongodb.com/ æä¾›å…è´¹çš„ mongoDB æ•°æ®åº“æœåŠ¡https://www.heroku.com/ æä¾›å…è´¹çš„ node ç¨‹åºæ‰˜ç®¡æœåŠ¡ 2. å‡†å¤‡2.1 å»ºç«‹æ•°æ®åº“ç™»å½• https://cloud.mongodb.com/ åˆ›å»º sandbox å®ä¾‹ã€‚å¾—åˆ°ç±»ä¼¼1234# &lt;username&gt; ä¸ºç”¨æˆ·å# &lt;password&gt; ä¸ºå¯†ç # ä¿®æ”¹ç»“å°¾å¤„ test =&gt; yapimongodb+srv://&lt;username&gt;:&lt;password&gt;@xxxx.mongodb.net/yapi?retryWrites=true çš„è¿æ¥å­—ç¬¦ä¸²ã€‚ 2.3 å…‹éš†ä»£ç YApi æºç ä½äº https://github.com/YMFE/yapi ä½ å¯ä»¥ Fork åˆ°ä½ è‡ªå·±çš„ä»“åº“ï¼Œç„¶åå…‹éš†ã€‚1git clone git@github.com:YMFE/yapi.git 2.4 ä¿®æ”¹å‡ è¡Œä»£ç é€‚åº” Heroku éƒ¨ç½²123456789101112131415161718192021222324252627282930313233343536cd yapi# è¿™é‡Œä½¿ç”¨æœ€æ–°ç‰ˆ 1.7.0 ï¼Œå¦‚æœæ‹…å¿ƒæœ€æ–°ç‰ˆæœ‰é—®é¢˜ä¹Ÿå¯ä»¥åˆ‡æ¢åˆ«çš„ç‰ˆæœ¬# https://github.com/YMFE/yapi/releasesgit checkout -b dev v1.7.0 # åˆ›å»ºé…ç½®æ–‡ä»¶cp ./config_example.json ./config.js# ç”±äº YApi é¡¹ç›®ä½¿ç”¨ JSON é…ç½®æ–‡ä»¶ï¼Œè€Œ JSON ä¸­ä¸èƒ½ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œæ”¹ä¸ºä½¿ç”¨ JS é…ç½®æ–‡ä»¶# æ‰“å¼€ config.js åœ¨ç¬¬ä¸€è¡Œ å¢åŠ  module.exports = # æ‰¾åˆ° db æ®µé…ç½®# æ·»åŠ  connecString å±æ€§ï¼Œå€¼ä¸º 2.1 æ­¥å¾—åˆ°çš„å­—ç¬¦ä¸²# ä¿®æ”¹ user å±æ€§å€¼ä¸º 2.1 æ­¥çš„ ç”¨æˆ·å# ä¿®æ”¹ pass å±æ€§å€¼ä¸º 2.1 æ­¥çš„ å¯†ç # æ‰“å¼€ server/yapi.js æ–‡ä»¶ # ä¿®æ”¹ä»¥ä¸‹è¡Œå†…å®¹const config = require('../../config.json');# =&gt;const config = require('../config.js');# æ‰“å¼€ ykit.config.js configPlugin = require('../config.json').plugins;# =&gt;configPlugin = require('../config.js').plugins;# æ‰“å¼€ server/utils/initConfig.jslet configPath = path.join(runtimePath, 'config.json');# =&gt; let configPath = path.join(runtimePath, 'config.js');# ä¿®æ”¹æ—¥å¿—è·¯å¾„ï¼Œå› ä¸º Heroku æ ¹ç›®å½•ä¸ºåªè¯»è·¯å¾„ï¼Œä¸å…è®¸ç¨‹åºåˆ›å»ºæˆ–å†™å…¥const WEBROOT_LOG = path.join(WEBROOT_RUNTIME, 'log');=&gt;const WEBROOT_LOG = path.resolve(__dirname, 'log'); 2.5 åˆå§‹åŒ–æ•°æ®åº“12345npm installnpm run install-server# å‡ºç°ä»¥ä¸‹æ—¥å¿—ï¼Œå³è¡¨ç¤ºæ•°æ®åº“åˆå§‹åŒ–æˆåŠŸlog: mongodb load success...åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·æˆåŠŸ,è´¦å·åï¼š\"admin@admin.com\"ï¼Œå¯†ç ï¼š\"ymfe.org\" 2.6 å¢åŠ ç¯å¢ƒå˜é‡1234567891011121314151617# æ‰“å¼€ config.js# ä¿®æ”¹ port èŠ‚ç‚¹ï¼šprocess.env.PORT# å› ä¸º Heroku ä¼šæä¾›ä¸€ä¸ªç«¯å£ç”¨æ¥åšè½¬å‘ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡è·å–è¿™ä¸ªç«¯å£å¹¶ç›‘å¬ï¼Œå¦åˆ™åº”ç”¨æ— æ³•å¯åŠ¨# ä¿®æ”¹ db èŠ‚ç‚¹åˆ°ä»¥ä¸‹å†…å®¹ï¼š \"db\": &#123; \"connectString\": process.env.connectString, \"servername\": \"127.0.0.1\", \"DATABASE\": \"yapi\", \"port\": 27017, \"user\": process.env.connectUser, \"pass\": process.env.connectPass, \"authSource\": \"yapi\" &#125;,git add .git commit 3. éƒ¨ç½²3.1 åˆ›å»ºé¡¹ç›®ç™»å½• https://dashboard.heroku.com/ åˆ›å»º appï¼Œä¾‹å¦‚ yapi-demoï¼ˆå·²ä½¿ç”¨ï¼Œè¯·å¦å¤–å‘½åï¼‰ï¼Œåˆ›å»ºå®Œæˆä¹‹åæ¥åˆ°é¡¹ç›®é¡µé¢ï¼šhttps://dashboard.heroku.com/apps/yapi-demo 3.2 é…ç½®ç¯å¢ƒå˜é‡ç‚¹å‡» Settings -&gt; Reveal Config Varsä¾æ¬¡æ·»åŠ ï¼š123connectString: mongodb+srv://&lt;username&gt;:&lt;password&gt;@xxxx.mongodb.net/yapi?retryWrites=trueconnectUser: adminconnectPass: xxxxx 3.3 æ¨é€ä»£ç åœ¨é¡¹ç›®ä¸»é¡µç‚¹å‡» Deployï¼Œæ ¹æ®æç¤ºå®‰è£… Heroku CLI å¹¶ç™»å½•ã€‚123456# cd yapi# ä¿®æ”¹ package.json -&gt; engines -&gt; node ä¸ºï¼š\"&gt;= 7.6.0 &lt; 11\"# å› ä¸ºé¡¹ç›®ä½¿ç”¨äº† node-sass. node-sass çš„ linux æ”¯æŒåˆ°æ­¤ç‰ˆæœ¬ã€‚heroku git:remote -a yapi-demogit push heroku dev:master --force# ç­‰å¾…æœåŠ¡å™¨å¤„ç†å®Œæˆå³å¯ 3.4 éªŒè¯éƒ¨ç½²æ‰“å¼€ https://yapi-demo.herokuapp.com/ï¼ˆå½“ç„¶ï¼Œä½ è¦æ›¿æ¢æˆä½ è‡ªå·±çš„åº”ç”¨åï¼‰ã€‚é¦–æ¬¡åŠ è½½å¯èƒ½å¾ˆæ…¢ï¼Œæœ‰ä¸€ä¸ªè¶…å¤§JSï¼Œéœ€è¦åŠ è½½ä¸€åˆ†é’Ÿå·¦å³ï¼ˆå›¢é˜Ÿéœ€è¦è§£å†³ä¸‹ï¼‰ã€‚ä½¿ç”¨å…ˆå‰çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•å³å¯ä½“éªŒã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ demo@demo.com/demo ç™»å½•YApi Demo ä½“éªŒï¼Œè¯·å‹¿ä¿®æ”¹å¯†ç ã€‚","categories":[{"name":"Front-end","slug":"Front-end","permalink":"https://mrzzcn.github.io/categories/Front-end/"}],"tags":[{"name":"Heroku","slug":"Heroku","permalink":"https://mrzzcn.github.io/tags/Heroku/"},{"name":"mongoDB","slug":"mongoDB","permalink":"https://mrzzcn.github.io/tags/mongoDB/"},{"name":"YApi","slug":"YApi","permalink":"https://mrzzcn.github.io/tags/YApi/"},{"name":"development","slug":"development","permalink":"https://mrzzcn.github.io/tags/development/"}]},{"title":"å‰ç«¯å¼€å‘åŸºç¡€ä¹‹ - Webpack","slug":"Front-end-Development-1","date":"2019-04-13","updated":"2019-05-04","comments":true,"path":"2019/04/13/Front-end-Development-1/","link":"","permalink":"https://mrzzcn.github.io/2019/04/13/Front-end-Development-1/","excerpt":"å‚è€ƒï¼šhttps://www.valentinog.com/blog/webpack-tutorial Webpack 4 æ›´æ–°ä¸çŸ­æ—¶é—´äº†ï¼Œç®€å•åšä¸ªæ•´ç†ã€‚ æœ¬æ–‡æ¼”ç¤ºåŸºäºä»“åº“ï¼šhttps://github.com/mrzzcn/webpack-playground 1. å®Œå…¨ 0 é…ç½®çš„æ¨¡å—åŒ–æ‰“åŒ…åˆ©å™¨ä¹ æƒ¯äº†webpack.config.jsçš„åŒå­¦å¯èƒ½ä¸çŸ¥é“è¿™ä¸ªå˜åŒ–ï¼ŒWebpack 4 é»˜è®¤ä¸éœ€è¦é…ç½®æ–‡ä»¶äº†ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰é…ç½®æ–‡ä»¶çš„é¡¹ç›®é‡Œè¿è¡Œwebpackä¼šé»˜è®¤æŸ¥æ‰¾./src/index.jsï¼Œè¾“å‡ºåˆ°./dist/main.jsã€‚å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªé»˜è®¤é…ç½®æ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š 12345678910const path = require('path');module.exports = &#123; entry: './src/index.js', output: &#123; path: path.resolve('dist'), filename: 'main.js' &#125;, ...&#125;; æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-0","text":"å‚è€ƒï¼šhttps://www.valentinog.com/blog/webpack-tutorial Webpack 4 æ›´æ–°ä¸çŸ­æ—¶é—´äº†ï¼Œç®€å•åšä¸ªæ•´ç†ã€‚ æœ¬æ–‡æ¼”ç¤ºåŸºäºä»“åº“ï¼šhttps://github.com/mrzzcn/webpack-playground 1. å®Œå…¨ 0 é…ç½®çš„æ¨¡å—åŒ–æ‰“åŒ…åˆ©å™¨ä¹ æƒ¯äº†webpack.config.jsçš„åŒå­¦å¯èƒ½ä¸çŸ¥é“è¿™ä¸ªå˜åŒ–ï¼ŒWebpack 4 é»˜è®¤ä¸éœ€è¦é…ç½®æ–‡ä»¶äº†ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰é…ç½®æ–‡ä»¶çš„é¡¹ç›®é‡Œè¿è¡Œwebpackä¼šé»˜è®¤æŸ¥æ‰¾./src/index.jsï¼Œè¾“å‡ºåˆ°./dist/main.jsã€‚å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ªé»˜è®¤é…ç½®æ–‡ä»¶ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š 12345678910const path = require('path');module.exports = &#123; entry: './src/index.js', output: &#123; path: path.resolve('dist'), filename: 'main.js' &#125;, ...&#125;; æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-0 2. mode: production &amp; developmentçœŸå®é¡¹ç›®ä¸­æˆ‘ä»¬ç»å¸¸ä¼šæœ‰å¤šä¸ªé…ç½®æ–‡ä»¶å¯¹åº”å¤šä¸ªç¯å¢ƒï¼šdevelopment: æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œéœ€è¦å¤„ç† webpack-dev-server proxy ç­‰é…ç½®testingï¼šæœ¬åœ°æµ‹è¯•stageï¼šbeta ç¯å¢ƒï¼Œæ›¿æ¢åŸŸåï¼Œå‘å¸ƒåˆ°æµ‹è¯•æœåŠ¡å™¨productionï¼šç”Ÿäº§ç¯å¢ƒï¼Œæ›¿æ¢åŸŸåï¼Œå‹ç¼©ï¼Œå¢åŠ æ–‡ä»¶æŒ‡çº¹æ›´æ–°ç¼“å­˜ï¼Œå‘å¸ƒåˆ° CDN ç­‰ Webpack ä¸ºæˆ‘ä»¬æä¾› mode é€‰é¡¹ç”¨æ¥ä½¿ç”¨ä¸€äº›é»˜è®¤çš„é…ç½®ï¼Œæœ‰ä¸‰ä¸ªå€¼ï¼šdevelopment | production | noneã€‚å…ˆçœ‹ä¸‹ä¸æ·»åŠ  mode æ—¶å€™è¿è¡Œçš„ä¸€ä¸ªè­¦å‘Šï¼š åŠ¨æ€æ¼”ç¤ºï¼šhttps://asciinema.org/a/240832 å¯ä»¥çœ‹åˆ° Webpack æ˜¯å¿…é¡»ä½¿ç”¨ mode é€‰é¡¹çš„ï¼Œå¦‚æœæ²¡æœ‰æä¾›ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤å€¼ productionï¼ŒåŒæ—¶ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º productionã€‚ä¸‰ä¸ªå€¼åŒºåˆ«å¦‚ä¸‹ï¼š é€‰é¡¹ æè¿° development ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º developmentã€‚ å¯ç”¨ NamedChunksPlugin å’Œ NamedModulesPluginã€‚ production ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º productionã€‚ å¯ç”¨ FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin å’Œ TerserPluginã€‚ none ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º noneã€‚ é€€å‡ºä»»ä½•é»˜è®¤ä¼˜åŒ–é€‰é¡¹ å…³äº mode çš„æ›´å¤šå…·ä½“ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…ï¼šhttps://webpack.docschina.org/concepts/mode/æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-1 3. æ›´æ”¹é»˜è®¤çš„å…¥å£æ–‡ä»¶å’Œè¾“å‡ºï¼Ÿä¹Ÿå¯ä»¥ï¼123456// package.json\"scripts\": &#123; \"start\": \"webpack\", \"build:dev\": \"webpack --mode development ./src/index.js --output ./dist/foo/main.js\", \"build\": \"webpack --mode production ./src/index.js --output ./dist/bar/main.js\"&#125; æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-2 4. ES6 with Babel 7ç°åœ¨å†™ JS åŸºæœ¬ç¦»ä¸å¼€ ES6ï¼Œä½¿ç”¨ ES6 å°±æ„å‘³ç€å¿…é¡»ä½¿ç”¨ç¼–è¯‘å™¨ã€‚webpack ä½¿ç”¨ babel-loader å¤„ç† JSï¼ŒæŠŠ ES6 ä»¥ä¸Šçš„è¯­æ³•ç¼–è¯‘åˆ° ES5 é€‚é…å¤§å¤šæ•°æµè§ˆå™¨ã€‚Babel 7 æ˜¯ Babel çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨ä¹‹å‰éœ€è¦å¼•ç”¨ä»¥ä¸‹ä¾èµ–ï¼š babel core babel loader babel preset env 1npm i @babel/core babel-loader @babel/preset-env --save-dev åœ¨é¡¹ç›®æ ¹ç›®å½•å¢åŠ æ–‡ä»¶ï¼š.babelrc12345&#123; \"presets\": [ \"@babel/preset-env\" ]&#125; ä¸‹ä¸€æ­¥ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ç”¨ babel-loader: æ·»åŠ é…ç½®æ–‡ä»¶webpack.config.js ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°é€‰é¡¹--module-bind webpack4 å·ç§°æ˜¯ 0é…ç½® çš„ï¼Œè¿™é‡Œä¸ºå•¥åˆå‡ºæ¥é…ç½®æ–‡ä»¶å‘¢ï¼Ÿå…¶å® webpack4 0é…ç½® çš„ä½œç”¨æ˜¯æœ‰é™çš„ï¼š å…¥å£ (entry point)ï¼Œé»˜è®¤å€¼ä¸ºï¼šsrc/index.js è¾“å‡º (output)ï¼Œé»˜è®¤å€¼ä¸ºï¼šdist/main.js mode (production or development) ä¸€èˆ¬çš„ä½¿ç”¨æ˜¯è¶³å¤Ÿäº†çš„ï¼Œä¸è¿‡å¦‚æœæƒ³è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ loader è¿˜æ˜¯å¿…é¡»åˆ›å»º config æ–‡ä»¶çš„ï¼Œæºå¼•ä½œè€… Sean çš„ä¸€æ®µå›ç­”ï¼š Q: Will loaders in webpack 4 work the same as webpack 3? Is there any plan to provide 0 conf for common loaders like babel-loader?A: â€œFor the future (after v4, maybe 4.x or 5.0), we have already started the exploration of how a preset or addon system will help define this. What we donâ€™t want: To try and shove a bunch of things into core as defaults What we do want: Allow other to extendâ€ å€ŸåŠ©é…ç½®æ–‡ä»¶webpack.config.jsä½¿ç”¨ babel-loaderæŒ‰ä½ ç†Ÿæ‚‰çš„æ–¹å¼æ·»åŠ æ–‡ä»¶webpack.config.js:12345678910111213module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.js$/, exclude: /node_modules/, use: &#123; loader: \"babel-loader\" &#125; &#125; ] &#125;&#125;; åœ¨ src/index.js é‡Œé¢æ·»åŠ ä¸€äº› ES6 ä»£ç ã€‚é‡æ–°ç¼–è¯‘ï¼Œçœ‹çœ‹ç»“æœæ˜¯ä¸æ˜¯å’Œä½ é¢„æƒ³çš„ä¸€æ ·å‘¢ï¼Ÿä½¿ç”¨è¿™ç§æ–¹å¼è¿˜å¯ä»¥æŸ¥çœ‹ ES6 ç±»çš„è¿è¡Œæœºåˆ¶ã€‚ ä¸æ·»åŠ é…ç½®æ–‡ä»¶å¯ç”¨ babel-loader çš„æ–¹æ³•çš„ç¡®æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œé‚£å°±æ˜¯--module-bindé€‰é¡¹ï¼Œè¿™æ˜¯ webpack3 å¼•å…¥çš„ã€‚åˆ é™¤ webpack.config.jsã€‚æ›´æ”¹ npm scriptsï¼Œæ·»åŠ å‚æ•°ï¼š12345\"scripts\": &#123; \"start\": \"webpack\", \"build:dev\": \"webpack --mode development ./src/index.js --output ./dist/foo/main.js --module-bind js=babel-loader\", \"build\": \"webpack --mode production ./src/index.js --output ./dist/bar/main.js --module-bind js=babel-loader\"&#125; é‡æ–°ç¼–è¯‘ï¼Œçœ‹å’Œä¸Šä¸€æ­¥çš„ç¼–è¯‘ç»“æœæ˜¯å¦ç›¸åŒã€‚ è¿™ç§ç”¨æ³•ä¼šè®© ç¼–è¯‘å‘½ä»¤å˜é•¿ä»è€Œç ´åå¯è¯»æ€§ï¼Œäº†è§£å³å¯ï¼Œä¸æ¨èåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-3 5. Reactç»å¸¸æœ‰äººä¼šè¯´ React æ¯”è¾ƒé‡ï¼Œå­¦ä¹ æ›²çº¿é™¡å³­ï¼Œå…¶å®ï¼Œå¦‚æœä½ ä½¿ç”¨ ES6 å’Œ babelï¼Œé…ç½® React ç›¸å½“å®¹æ˜“ï¼š12npm i react react-dom --save-devnpm i @babel/preset-react --save-dev åœ¨.babelrc ä¸­é…ç½® React preset123&#123; \"presets\": [\"@babel/preset-env\", \"@babel/preset-react\"]&#125; å®Œäº†ï¼å¦‚æœä½ æ›´å–œæ¬¢.jsxåç¼€åæ¥åŒºåˆ†æ™®é€šçº¯ JS æ–‡ä»¶å’Œ åŒ…å« JSX è¯­æ³•çš„ React é¡µé¢æˆ–ç»„ä»¶ï¼Œéœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­é…ç½® JSX æ”¯æŒï¼š12345678910111213module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.(js|jsx)$/, // æ­¤å¤„å¢åŠ  jsx åç¼€åè¯†åˆ« exclude: /node_modules/, use: &#123; loader: \"babel-loader\" &#125; &#125; ] &#125;&#125;; æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œæ·»åŠ æ–‡ä»¶ï¼š./src/App.jsx:123456789101112import React from 'react';import ReactDOM from 'react-dom';const App = () =&gt; &#123; return ( &lt;div&gt; &lt;p&gt;React here!&lt;/p&gt; &lt;/div&gt; );&#125;;export default App;ReactDOM.render(&lt;App /&gt;, document.getElementById('app')); åœ¨å…¥å£æ–‡ä»¶./src/index.jsä¸­æ·»åŠ ï¼š1import App from './App.jsx'; é‡æ–°ç¼–è¯‘ï¼Œä½ ä¼šå‘ç°è¾“å‡ºå†…å®¹å˜å¤šäº†ä¸å°‘ï¼Œå› ä¸º React åº“è¢«æ‰“åŒ…è¿›æ¥ï¼Œä¸è¿‡åœ¨æ–‡ä»¶ç»“å°¾å¤„ï¼Œä½ ä»ç„¶å¯ä»¥åˆ†è¾¨å‡ºæ¥æˆ‘ä»¬ç¼–å†™çš„ React ç»„ä»¶è¢«ç¼–è¯‘ä¹‹åçš„æ ·å­ã€‚ ä¸€æ—¦ç†è§£äº†åº”ç”¨ç¨‹åºçš„æœ¬è´¨ï¼šæ•°æ®ç»“æ„+ç®—æ³•ï¼Œä½ ä¼šè§‰å¾— React çš„è®¾è®¡æœ‰å¤šä¹ˆå¹²å‡€ã€çº¯ç²¹ï¼Œä½ ä¼šè§‰å¾—è‡ªå·±åŸæ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“æ‹¼å‡‘ä»£ç çš„æ–¹å¼ç®€ç›´åƒæ•°å­—æ—¶ä»£çš„åŸå§‹äººã€‚è€Œä¸€æ—¦å†™åˆ°è¡¨å•éƒ¨åˆ†ï¼Œä½ ä¼šçªç„¶å‘ç°åšä¸ªåŸå§‹äººæŒºå¿«ä¹çš„ã€‚ã€‚ã€‚ğŸ˜‚ HTML webpack pluginç»„ä»¶éœ€è¦å±•ç¤ºå‡ºæ¥ï¼Œå¦‚æœæƒ³è¦â€œçœ‹è§â€ï¼Œéœ€è¦æŠŠç¼–è¯‘çš„ç»“æœå‘ˆç°åœ¨ç½‘é¡µä¸Šï¼Œwebpack ä½¿ç”¨ html-webpack-plugin å’Œ html-loader æ¥å¤„ç† HTML æ–‡ä»¶ã€‚1npm i html-webpack-plugin html-loader --save-dev æ·»åŠ src/index.html12345678910&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;title&gt;webpack 4 quickstart&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"app\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ç¼–è¾‘webpack.config.js:123456789101112131415161718192021222324252627282930const HtmlWebPackPlugin = require(\"html-webpack-plugin\");module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.(js|jsx)$/, exclude: /node_modules/, use: &#123; loader: \"babel-loader\" &#125; &#125;, &#123; test: /\\.html$/, use: [ &#123; loader: \"html-loader\", options: &#123; minimize: false &#125; &#125; ] &#125; ] &#125;, plugins: [ new HtmlWebPackPlugin(&#123; template: \"./src/index.html\", filename: \"./index.html\" &#125;) ]&#125;; é‡æ–°ç¼–è¯‘ï¼Œçœ‹ä¸€ä¸‹distæ–‡ä»¶å¤¹ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ç¼–è¯‘äº§ç”Ÿçš„ html æ–‡ä»¶ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå³å¯é¢„è§ˆåˆšæ‰ç¼–å†™çš„ React ç»„ä»¶ã€‚æ— éœ€æ‰‹åŠ¨æ·»åŠ  JS å¼•ç”¨ï¼Œwebpack ä¼šæŠŠç¼–è¯‘è¾“å‡ºçš„ èµ„æº è‡ªåŠ¨æ³¨å…¥åˆ° Html æ–‡ä»¶ç›¸åº”ä½ç½®ã€‚ æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-4 6. VUEVUE å¯¹åˆå­¦è€…éå¸¸å‹å¥½ï¼Œæœ‰å¾ˆå¤šAPIï¼Œå‡ ä¹ä½ èƒ½æƒ³åˆ°çš„ä»–å…¨éƒ½ä¸ºä½ åšäº†ã€‚è€Œä¸”å®˜ç½‘çš„æ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œå„ç§è¯­è¨€ç‰ˆæœ¬éƒ½æœ‰ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹äºæ—§é¡¹ç›®ï¼ˆéMV**æ¡†æ¶çš„é¡¹ç›®ï¼‰è€Œè¨€ï¼Œä½¿ç”¨ VUE é‡æ„éå¸¸æ–¹ä¾¿ã€‚åœ¨ webpack é¡¹ç›®é‡Œä½¿ç”¨ VUEä¹Ÿå¾ˆæ–¹ä¾¿ï¼š1npm i vue --save-dev ä¿®æ”¹ ./src/index.js:123456789import Vue from 'vue';const app = new Vue(&#123; el: '#app', data: &#123; message: 'Hello Vue!' &#125;, template: `&lt;div&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;`&#125;); ä¿®æ”¹webpack.config.js:12345resolve: &#123; alias: &#123; vue$: \"vue/dist/vue.esm.js\" &#125;&#125; å…³äº VUE çš„ ä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š è¯·ç§»æ­¥ï¼šä¸åŒæ„å»ºç‰ˆæœ¬çš„è§£é‡Š é‡æ–°ç¼–è¯‘ï¼Œåˆ·æ–°é¢„è§ˆï¼Œå¯ä»¥çœ‹åˆ° VUE å®ä¾‹å·²ç»æ³¨å…¥åˆ°é¡µé¢ä¸­ã€‚ æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-5 7. CSSwebpack é»˜è®¤ä¸ä¼šå§ CSS å†…å®¹æå–åˆ°å•ç‹¬çš„ css æ–‡ä»¶é‡Œã€‚ä¹‹å‰æˆ‘ä»¬ç”¨ extract-text-webpack-plugin åšè¿™ä»¶äº‹ï¼Œä¸å¹¸çš„æ˜¯ è¿™ä¸ªæ’ä»¶å¯¹ webpack4 çš„æ”¯æŒå¹¶ä¸ååˆ†å‹å¥½ã€‚ Michael Ciniawsky: extract-text-webpack-plugin reached a point where maintaining it become too much of a burden and itâ€™s not the first time upgrading a major webpack version was complicated and cumbersome due to issues with it. ä¸è¿‡ä¸ç”¨ç€æ€¥ï¼Œæˆ‘ä»¬æœ‰ mini-css-extract-pluginï¼ˆéœ€è¦ webpack 4.2.X ä»¥ä¸Šï¼‰ã€‚1npm i mini-css-extract-plugin css-loader --save-dev æ·»åŠ  loader å’Œ æå–æ’ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344const HtmlWebPackPlugin = require('html-webpack-plugin');const MiniCssExtractPlugin = require('mini-css-extract-plugin');module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.(js|jsx)$/, exclude: /node_modules/, use: &#123; loader: 'babel-loader' &#125; &#125;, &#123; test: /\\.html$/, use: [ &#123; loader: 'html-loader', options: &#123; minimize: false &#125; &#125; ] &#125;, &#123; test: /\\.css$/, use: [MiniCssExtractPlugin.loader, 'css-loader'] &#125; ] &#125;, resolve: &#123; alias: &#123; vue$: 'vue/dist/vue.esm.js' &#125; &#125;, plugins: [ new HtmlWebPackPlugin(&#123; template: './src/index.html', filename: './index.html' &#125;), new MiniCssExtractPlugin(&#123; filename: '[name].css', chunkFilename: '[name].[id].css' &#125;) ]&#125;; æ·»åŠ  css æ–‡ä»¶src/main.css:1234body &#123; line-height: 2; background-color: green;&#125; åœ¨ src/index.jsä¸­å¼•å…¥ css æ–‡ä»¶ï¼šimport &#39;./main.css&#39;;é‡æ–°ç¼–è¯‘ï¼Œåˆ·æ–°é¢„è§ˆï¼Œä½ ä¼šå‘ç°é¡µé¢æ–‡å­—å˜å¾—æ›´é«˜ï¼ŒèƒŒæ™¯ä¹Ÿå˜æˆæ›´æ¸…æ–°çš„ç»¿è‰²ã€‚ æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-6 8. webpack dev serveræ¯æ¬¡æ›´æ”¹ä»£ç éƒ½è¦é‡æ–°ç¼–è¯‘ï¼Œæ‰‹åŠ¨åˆ·æ–°ï¼Œæ˜¯ä¸æ˜¯å¾ˆçƒ¦ï¼Œä½¿ç”¨ webpack dev serverå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¯ä»¥å¤§å¤§æ–¹ä¾¿æˆ‘ä»¬çš„å¼€å‘è°ƒè¯•è¿‡ç¨‹ï¼š1npm i webpack-dev-server --save-dev ä¿®æ”¹ npm scripts:12345\"scripts\": &#123; \"start\": \"webpack-dev-server --mode development --open\", // ä½¿ç”¨ webpack-dev-server å¯åŠ¨å¼€å‘æœåŠ¡å™¨ \"build:dev\": \"webpack --mode development\", \"build\": \"webpack --mode production\"&#125; ç»ˆç«¯å¯åŠ¨ npm start ã€‚webpack ä¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨å¹¶åœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€é¢„è§ˆé¡µé¢ï¼Œéšæ„æ›´æ”¹æºä»£ç ï¼Œç¨ç­‰å‡ ç§’é¡µé¢å³å¯è‡ªåŠ¨åˆ·æ–°ã€‚ æºç ï¼šhttps://github.com/mrzzcn/webpack-playground/tree/step-7 9. Proxyå‰ç«¯å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å¤šç«¯åŒæ­¥å¼€å§‹çš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œéœ€æ±‚å®šä¸‹æ¥ä¹‹åï¼Œè®¾è®¡ã€å‰ç«¯ã€åç«¯éƒ½å¼€å§‹å·¥ä½œï¼Œå‰ã€åç«¯ä¾èµ–ä¸å…±åŒçº¦å®šçš„æ¥å£å¼€å‘ï¼Œæœ€ååŒæ–¹éƒ½ Ready å†è”è°ƒã€‚åç«¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ã€Postmanã€CURLç­‰å·¥å…·å‘èµ·è¯·æ±‚è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯å‰ç«¯åœ¨æ²¡æœ‰åç«¯æ¥å£çš„æƒ…å†µä¸‹ä¹Ÿè¦ç»§ç»­å·¥ä½œï¼Œè¿™æ—¶å€™å°±éœ€è¦æ¨¡æ‹Ÿåç«¯æ¥å£ã€‚ä¿®æ”¹webpack.config.jsï¼Œ1234567891011// å¢åŠ ä»¥ä¸‹èŠ‚ç‚¹ï¼šdevServer: &#123; proxy: &#123; '/api': &#123; target: 'https://yapi-demo.herokuapp.com/mock/16', changeOrigin: true, pathRewrite: &#123; '^/api': '' &#125;, toProxy: true &#125; &#125;&#125; ä¿®æ”¹ src/index.js:12345678910111213141516171819202122232425import Vue from 'vue';import './main.css';const app = new Vue(&#123; el: '#app', data: &#123; message: 'Hello Vue !' + new Date().toTimeString(), posts: [] &#125;, created() &#123; fetch('/api/posts') .then(res =&gt; res.json()) .then(posts =&gt; &#123; this.posts = posts; &#125;); &#125;, template: `&lt;div&gt; &#123;&#123;message&#125;&#125; &lt;hr/&gt; Total &#123;&#123;posts.length&#125;&#125; posts: &lt;ul&gt; &lt;li v-for=\"post in posts\" key=&#123;&#123;post.id&#125;&#125;&gt;&#123;&#123;post.title&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;`&#125;); ä¿å­˜ï¼Œé‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚åœ¨æ‰“å¼€çš„æµè§ˆå™¨çª—å£ä¸­å¯ä»¥é¢„è§ˆåˆ©ç”¨ mock server æ¨¡æ‹Ÿåç«¯æ¥å£çš„åº”ç”¨ç¨‹åºé¢„è§ˆã€‚ å…³äºä»£ç†æœåŠ¡å™¨ https://yapi-demo.herokuapp.com/mock/16 çš„æ­å»ºï¼Œå¯ä»¥å‚è€ƒï¼šä½¿ç”¨ Heroku å’Œ mongoDB Atlas å…è´¹æ‰˜ç®¡ YApi å’Œ YApi å®˜ç½‘YApi æ˜¯æˆ‘è§è¿‡æœ€ä¼˜ç§€çš„ Api ç®¡ç†è½¯ä»¶ï¼ŒåŒç±»è½¯ä»¶è¿˜æœ‰ zan-proxy å’Œ nei ç­‰ï¼Œä¸è¿‡åŠŸèƒ½ç›¸å¯¹è¾ƒå¼±ã€‚åé¢æˆ‘ä¼šå†™æ–‡ç« ç»§ç»­ä»‹ç» YApi çš„é«˜çº§ç”¨æ³•ï¼ŒåŒ…æ‹¬æ•°æ®æ¨¡æ‹Ÿã€åŠ¨æ€æœŸæœ›ã€é›†æˆå¯¹åç«¯Apiçš„è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ã€‚","categories":[{"name":"Technology","slug":"Technology","permalink":"https://mrzzcn.github.io/categories/Technology/"},{"name":"Front-end","slug":"Technology/Front-end","permalink":"https://mrzzcn.github.io/categories/Technology/Front-end/"}],"tags":[{"name":"Front-end","slug":"Front-end","permalink":"https://mrzzcn.github.io/tags/Front-end/"},{"name":"Development","slug":"Development","permalink":"https://mrzzcn.github.io/tags/Development/"}]},{"title":"å¼ºåŒ–ç½‘ç«™å®‰å…¨ - ç¬¬ä¸€ç¯‡ï¼šå®‰å…¨ç›¸å…³çš„Headers (Hardening Website Security â€“ Part 1: HTTP Security Headers)","slug":"HTTP-Security-Headers","date":"2019-01-11","updated":"2019-04-27","comments":true,"path":"2019/01/11/HTTP-Security-Headers/","link":"","permalink":"https://mrzzcn.github.io/2019/01/11/HTTP-Security-Headers/","excerpt":"åŸæ–‡ï¼šHardening Website Security â€“ Part 1: HTTP Security Headers ç®€ä»‹æ„Ÿè§‰æ¯å‘¨éƒ½ä¼šå‡ºç°æ–°çš„ä¸ªäººä¿¡æ¯è¢«ç›—äº‹ä»¶ï¼ŒåŸå› æ˜¯æŸä¸€å®¶å…¬å¸ç½‘ç«™è¢«é»‘äº†ã€‚ å¤§éƒ¨åˆ†æ”»å‡»éƒ½æ˜¯é€šè¿‡ç¤¾ä¼šå·¥ç¨‹å­¦è¯±éª—æŸäº›ç”¨æˆ·ä¸»åŠ¨æäº¤ä¸€äº›ä¿¡æ¯ï¼Œé»‘å®¢å€ŸåŠ©è¿™äº›ä¿¡æ¯è·å–æ›´é«˜æƒé™å¹¶æœ€ç»ˆè·å–ä¸ªäººèµ„æ–™ã€‚ å¦‚æœä½ æƒ³è¦åœ¨21ä¸–çºªè¿è¥ä¸€ä¸ªå®‰å…¨çš„ç½‘ç«™ï¼Œä½ éœ€è¦éµå¾ªä¸€äº›å®‰å…¨å‡†åˆ™ï¼Œæˆ‘ä¼šå†™ä¸€ä¸ªç³»åˆ—ä¸“æ è¯´æ˜è¿™äº›å®‰å…¨å‡†åˆ™ï¼Œè¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚","text":"åŸæ–‡ï¼šHardening Website Security â€“ Part 1: HTTP Security Headers ç®€ä»‹æ„Ÿè§‰æ¯å‘¨éƒ½ä¼šå‡ºç°æ–°çš„ä¸ªäººä¿¡æ¯è¢«ç›—äº‹ä»¶ï¼ŒåŸå› æ˜¯æŸä¸€å®¶å…¬å¸ç½‘ç«™è¢«é»‘äº†ã€‚ å¤§éƒ¨åˆ†æ”»å‡»éƒ½æ˜¯é€šè¿‡ç¤¾ä¼šå·¥ç¨‹å­¦è¯±éª—æŸäº›ç”¨æˆ·ä¸»åŠ¨æäº¤ä¸€äº›ä¿¡æ¯ï¼Œé»‘å®¢å€ŸåŠ©è¿™äº›ä¿¡æ¯è·å–æ›´é«˜æƒé™å¹¶æœ€ç»ˆè·å–ä¸ªäººèµ„æ–™ã€‚ å¦‚æœä½ æƒ³è¦åœ¨21ä¸–çºªè¿è¥ä¸€ä¸ªå®‰å…¨çš„ç½‘ç«™ï¼Œä½ éœ€è¦éµå¾ªä¸€äº›å®‰å…¨å‡†åˆ™ï¼Œæˆ‘ä¼šå†™ä¸€ä¸ªç³»åˆ—ä¸“æ è¯´æ˜è¿™äº›å®‰å…¨å‡†åˆ™ï¼Œè¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚ æœ¬æ–‡ä¸ä¼šä»‹ç»ä»¥ä¸‹å†…å®¹å› ä¸ºç½‘ç»œåŸºç¡€æ¶æ„çš„å®‰å…¨é…ç½®å†…å®¹å¤ªå¤šï¼ˆè‡ªæ‰˜ç®¡æˆ–è€…VPSï¼ŒOSï¼Œç®¡ç†ä¸­å°ï¼Œé˜²ç«å¢™ç­‰ï¼‰è€Œä¸”ç»†å¾®å·®å¼‚ä¼—å¤šï¼Œæˆ‘ä¸ä¼šåœ¨è¿™ä¸ªç³»åˆ—ä¸­ä»‹ç»ã€‚æˆ‘å¯èƒ½åé¢ä¼šä¸“é—¨å†™ç›¸å…³æ–‡ç« ä»‹ç»é‚£äº›å†…å®¹ã€‚ å…è´£å£°æ˜ æ–‡ç« å†…å®¹æ¥è‡ªäºæˆ‘å¤šå¹´çš„å·¥ä½œç»éªŒã€å°è¯•ï¼Œä»¥åŠï¼ˆé¢‘ç¹ï¼‰çŠ¯é”™çš„æ€»ç»“ã€‚åœ¨æ­£å¸¸ç»è¥çš„ç½‘ç«™å¿½ç•¥HTTP headers è®¾ç½®ï¼ˆææœ‰ï¼‰å¯èƒ½å¯¼è‡´ä¸€äº›æ„å¤–çš„ç”šè‡³æ˜¯ç¾éš¾æ€§çš„åæœã€‚æœ¬æ–‡æ‰€å†™å†…å®¹éƒ½æ˜¯ä¸ªäººä¾æ®è‡ªèº«çŸ¥è¯†æ°´å¹³æ€»ç»“çš„æœ€ä½³å®è·µï¼Œä½†æ˜¯æ¶‰åŠåˆ°å®‰å…¨é—®é¢˜ï¼Œæˆ‘å¼ºçƒˆå»ºè®®è¯»è€…åœ¨å¯¹ä½ è‡ªå·±çš„ç³»ç»Ÿæˆ–ç½‘ç«™åšä»»ä½•æ”¹åŠ¨ä¹‹å‰ç¡®ä¿ä½ çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆä»¥åŠè¿™ä¹ˆå¹²çš„åæœã€‚æœ¬æ–‡æ‰€æœ‰çš„ä»£ç ä»…ä½œç¤ºä¾‹å±•ç¤ºï¼Œå¯èƒ½å¹¶ä¸å®Œå–„ç”šè‡³æœ‰ä¸€äº›é”™è¯¯ã€‚è¯»è€…ä»ç½‘é¡µä¸Šæ‹·è´ç²˜è´´ä½¿ç”¨ä»£ç æ—¶éœ€è¦æ ¼å¤–å°å¿ƒï¼Œè¿™ä¸ªç½‘ç«™ä¹ŸåŒ…å«åœ¨å†…ã€‚Int64 Software Ltdå…¬å¸æ‰€æœ‰å‘˜å·¥ä¸ä¼ä¸šæ³•äººä»£è¡¨ä¸å¯¹å› æ•…æ„æˆ–æ— æ„è¯¯ç”¨å…¶å¸–å­å’Œæ–‡ç« ä¸­æ‰€æä¾›ä¿¡æ¯è€Œé€ æˆçš„æŸå®³æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ æ¦‚è¿°å½“WebæœåŠ¡å™¨æ¥æ”¶ä¸€ä¸ªæ ‡å‡†çš„ HTTP Get è¯·æ±‚ä¹‹åï¼Œå®ƒä¼šæŠŠè¯·æ±‚çš„èµ„æºå’Œä¸€äº›Headerä¿¡æ¯ä¸€èµ·è¿”å›ã€‚è¿™å¯¹äºæµè§ˆå™¨å¦‚ä½•å¤„ç†å“åº”æ•°æ®æ¥è¯´æ˜¯å¿…è¦çš„ï¼Œæ¯”å¦‚èµ„æºçš„ç¼–ç ï¼Œå†…å®¹é•¿åº¦ç­‰ã€‚ ç¬¬ä¸€ç¯‡æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®‰å…¨ç›¸å…³çš„ Headeræœ‰å“ªäº›ï¼Œä»–ä»¬çš„ä½œç”¨ä»¥åŠå¦‚ä½•è®¾ç½®ä»–ä»¬ã€‚ é…ç½®æœåŠ¡å™¨ç½‘ç«™æ‰˜ç®¡ç¯å¢ƒä¸åŒï¼Œè®¾ç½®Headerçš„æ–¹æ³•ä¸åŒã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„æ¯”è¾ƒæµè¡Œçš„æœåŠ¡å™¨è½¯ä»¶/ç¼–ç¨‹è¯­è¨€çš„Headeré…ç½®æ–¹æ³•ã€‚ Apache Web ServerApacheçš„è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶ä½äº.htaccess æˆ–.httpd.confï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤è®¾ç½®ï¼š1Header set [HeaderName] [HeaderValue] Nginxåœ¨Nginx çš„config ç›®å½•ä¸‹ï¼Œæ‰“å¼€nginx.confï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š1add_header [HeaderName] \"[HeaderValue]\"; IIS(è¯‘è€…åŠ : åœ¨æ¯ä¸ªè™šæ‹Ÿä¸»æœºç›®å½•ä¸‹)æ‰“å¼€Web.Configæ–‡ä»¶ï¼Œåœ¨&lt;system.webServer&gt;èŠ‚ç‚¹ä¸‹æ·»åŠ &lt;customHeaders&gt;èŠ‚ç‚¹ï¼š12345&lt;httpProtocol&gt; &lt;customHeaders&gt; &lt;add name=\"[HeaderName]\" value=\"[HeaderValue]\" /&gt; &lt;/customHeaders&gt;&lt;/httpProtocol&gt; PHPPHP å¯ä»¥åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼ˆåœ¨ä»»æ„è¾“å‡ºå†…å®¹è®¾ç½®ä¹‹å‰ï¼ŒåŒ…æ‹¬ç©ºç™½ï¼‰ä½¿ç”¨header æ–¹æ³•è®¾ç½®ï¼š1header('[HeaderName]: [HeaderValue]', true); å¤‡æ³¨ï¼šä¸€ä¸ªè¯·æ±‚åªéœ€è¦è®¾ç½®ä¸€æ¬¡Headerï¼Œä¸éœ€è¦åœ¨æ¯ä¸ªåŒ…å«çš„PHPæ–‡ä»¶é‡Œé¢é…ç½®ã€‚true è¡¨ç¤ºä¼šè¦†ç›–å·²å­˜åœ¨çš„åŒå Header ã€‚ Asp.Netåœ¨global.asax æ–‡ä»¶å¢åŠ ä»¥ä¸‹ä»£ç ï¼š1234protected void Application_BeginRequest(object sender, EventArgs e)&#123; HttpContext.Current.Response.AddHeader(\"[HeaderName]\", \"[HeaderValue]\");&#125; HeadersX-Frame-OptionsX-Frame-Optionsç”¨æ¥é˜²æ­¢ ç‚¹å‡»åŠ«æŒï¼Œç‚¹å‡»åŠ«æŒæŒ‡çš„æ˜¯æ”»å‡»è€…è¯•å›¾åœ¨ç”¨æˆ·æµè§ˆ/ä½¿ç”¨ç½‘é¡µè¿‡ç¨‹ä¸­åœ¨è¯¸å¦‚ç‚¹å‡»æŒ‰é’®ç­‰äº‹ä»¶ä¸­æ‰§è¡Œä¸€äº›éé¢„æœŸçš„æ“ä½œã€‚å…¶ä¸­å¸¸è§çš„ä¸€ç§æ”»å‡»æ–¹å¼æ˜¯ æ”»å‡»è€…åœ¨ä»–ä»¬è‡ªå·±çš„é’“é±¼ç½‘ç«™ä¸Šé€šè¿‡iframe åµŒå…¥ä½ çš„ç½‘é¡µï¼Œç„¶ååœ¨ç•Œé¢ä¸Šè¦†ç›–ä¸€ä¸ªé€æ˜çš„åŒºåŸŸï¼Œç”¨æˆ·ä»¥ä¸ºåœ¨æµè§ˆä½ çš„ç½‘é¡µï¼Œå…¶å®ç”¨æˆ·æäº¤çš„ä¿¡æ¯å·²ç»è¢«æ”»å‡»è€…ç›—å–ã€‚é€šè¿‡è®¾ç½®X-Frame-Options ä½ å¯ä»¥å‘Šè¯‰æµè§ˆå™¨å½“å‰ç½‘é¡µä¸å…è®¸é€šè¿‡iframe åŠ è½½ã€‚è¯¥é€‰é¡¹æœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼š DENYè®¾ç½®ä¸ºDENYå¯ä»¥é˜»æ­¢ä»»ä½•å…¶ä»–ç½‘é¡µé€šè¿‡iframeåµŒå…¥ä½ çš„ç½‘é¡µã€‚é™¤éä½ çš„ç½‘é¡µæ˜ç¡®éœ€è¦è¢«åµŒå…¥ï¼Œå¦åˆ™è¯·è®¾ç½®ä¸ºè¿™ä¸ªå€¼ã€‚ SAMEORIGINè®¾ç½®ä¸ºSAMEORIGINä¼šå…è®¸ä½ è‡ªå·±çš„ç½‘ç«™ï¼ˆåŒä¸€åŸŸåï¼‰ï¼Œä½†æ˜¯ä¼šé˜»æ­¢å…¶ä»–åŸŸï¼ˆåŒ…æ‹¬å…¶ä»–å­åŸŸï¼‰åµŒå…¥ä½ çš„ç½‘é¡µã€‚ ALLOW-FROM &lt;uri\\&gt;è¿™ç§æ–¹å¼å°†é˜»æ­¢é™¤æŒ‡å®šURIä»¥å¤–çš„å…¶ä»–æ‰€æœ‰ç½‘é¡µä½¿ç”¨iframeåŠ è½½å½“å‰ç½‘é¡µ(æ¯”å¦‚ALLOW-FROM https://myothersite.com)ã€‚ æ³¨æ„ï¼šè¯¥é€‰é¡¹çš„æµè§ˆå™¨æ”¯æŒæ€§æœ‰é™ æ¨èé…ç½®X-Frame-Options åº”å½“æ€»æ˜¯è®¾ç½®ä¸ºDENYï¼Œé™¤éæœ‰æ˜ç¡®çš„éœ€è¦é…ç½®ä¸ºå…¶ä»–å€¼ å…¶ä»–è¯´æ˜X-Frame-Options é€‰é¡¹ç›®å‰ä»ç„¶è¢«å¹¿æ³›æ”¯æŒï¼Œä½†æ˜¯ç¨åå³å°†è®¨è®ºçš„CSPçš„frame-srcé€‰é¡¹å¯ä»¥æ›¿ä»£è¿™ä¸ªåŠŸèƒ½ã€‚ä½†æ˜¯IEå¯¹CSPçš„æ”¯æŒä»IE11 å¼€å§‹ï¼Œè€ŒIE8ä»¥ä¸Šå·²ç»æ”¯æŒX-Frame-Optionsï¼Œæ‰€ä»¥å®ƒä»ç„¶éœ€è¦é…ç½®ã€‚ X-XSS-ProtectionX-XSS-Protection è¢«è®¾è®¡ç”¨äºé˜»æ­¢è·¨ç«™ç®€æœ¬æ”»å‡»(XSS)ï¼ŒX-XSS-Protectioné€‰é¡¹å°†å¼€å¯æµè§ˆå™¨çš„XSSè¿‡æ»¤åŠŸèƒ½ã€‚XSSçš„æ”»å‡»è€…é€šè¿‡æ³¨å…¥æ¶æ„è„šæœ¬ï¼ˆä¾‹å¦‚é€šè¿‡æœªç»å®‰å…¨è¿‡æ»¤çš„ç”¨æˆ·è¾“å…¥æ¡†ï¼‰åˆ°ç½‘é¡µï¼Œåœ¨ç”¨æˆ·æµè§ˆæ—¶å½±å“ç½‘é¡µæ­£å¸¸å±•ç¤ºæˆ–è€…å·å–æµè§ˆè€…ä¸ªäººæ•°æ®ã€‚æœ€è¿‘æœ‰ä¸€èµ·XSSæ”»å‡»äº‹ä»¶ï¼Œæ”»å‡»è€…é€šè¿‡è„†å¼±çš„å¹¿å‘Šç½‘ç»œæ³¨å…¥æ¶æ„è„šæœ¬ã€‚æ”»å‡»è€…æœ‰å¯èƒ½ä¼šæŠŠç”¨æˆ·çš„ä»˜æ¬¾ä¿¡æ¯è½¬å‘ä»–è‡ªå·±è€Œä¸æ˜¯ç”¨æˆ·æ‰€ä½¿ç”¨ç½‘é¡µçš„æä¾›è€…ã€‚X-XSS-Protectionå¯ä»¥é€šçŸ¥æµè§ˆå™¨è¿‡æ»¤å¹¶é˜»æ­¢XSSæ”»å‡»è¿›è€Œé™ä½å®‰å…¨é£é™©ï¼Œå®ƒæœ‰å››ç§å–å€¼ï¼š 0.ä¸å¯ç”¨ï¼ˆä¸æ¨èï¼‰ 1.å¯ç”¨ï¼Œå¦‚æœæ£€æµ‹åˆ°æ”»å‡»ä»£ç ï¼Œå°†ä¼šåˆ é™¤æ¶æ„ä»£ç å¹¶ç»§ç»­å±•ç¤ºç½‘é¡µã€‚é€šå¸¸æ˜¯é»˜è®¤å€¼ã€‚ 1; mode=blockå¯ç”¨ï¼Œå¦‚æœæ£€æµ‹åˆ°æ”»å‡»ä»£ç ï¼Œå°†ä¼šé˜»æ­¢ç½‘é¡µç»§ç»­å±•ç¤ºã€‚ 1; report=&lt;reporting-uri&gt;å¯ç”¨ï¼Œå¦‚æœæ£€æµ‹åˆ°æ”»å‡»ä»£ç ï¼Œå°†ä¼šé˜»æ­¢å¹¶æ¸…ç†ç½‘é¡µï¼Œç„¶åå‘æŒ‡å®šçš„uriæŠ¥å‘Šæ¶æ„æ”»å‡»äº‹ä»¶ã€‚ æ¨èé…ç½®X-XSS-Protectionåº”è¯¥è®¾ç½®ä¸º1ï¼Œç„¶åçœ‹æƒ…å†µå¼€å¯blockæˆ–reporté€‰é¡¹ å…¶ä»–è¯´æ˜ä¸X-Frame-Optionsç±»ä¼¼ï¼ŒCSPå¯ä»¥è®¾ç½®æ›´å¼ºå¤§å’Œå®‰å…¨çš„ç­–ç•¥ï¼Œå¯ä»¥å½»åº•ç¦æ­¢é¡µé¢å†…è”è„šæœ¬çš„æ‰§è¡Œã€‚ç¨åè®¨è®ºã€‚ X-Content-Type-OptionsX-Content-Type-Optionsåªæœ‰ä¸€ä¸ªå–å€¼nosniffï¼Œä¹Ÿåªæœ‰ä¸€ä¸ªç›®çš„ï¼šé˜»æ­¢æµè§ˆå™¨ä½¿ç”¨Content-Typeä»¥å¤–çš„ç±»å‹å¤„ç†å½“å‰å†…å®¹ã€‚å½“æµè§ˆå™¨æ”¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¹‹åï¼ŒContent-Typeä¼šå‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªæ–‡ä»¶çš„ç±»å‹ï¼Œæµè§ˆå™¨è‡ªå·±ä¹Ÿä¼šä½¿ç”¨å¤šç§æŠ€æœ¯åšå†…å®¹å—…æ¢ï¼ˆæˆ–è€…åª’ä½“ç±»å‹å—…æ¢æˆ–MIMEå—…æ¢ï¼‰ï¼Œææ¸…æ¥šæ–‡ä»¶çš„å…·ä½“ç±»å‹ç„¶åç›¸åº”å¤„ç†ã€‚ç„¶åï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°ç”¨æˆ·æœŸæœ›çš„æ–‡ä»¶ç±»å‹ä¸äº‹å®ä¸ç¬¦çš„æƒ…å†µï¼Œè¿™æœ‰å¯èƒ½å¯¼è‡´è·¨ç«™è„šæœ¬æ”»å‡»æˆ–æ¶æ„è½¯ä»¶åˆ†å‘ã€‚ æ¨èé…ç½®ä¸Šé¢å·²ç»è¯´äº†ï¼Œåº”å½“æ€»æ˜¯è®¾ç½®X-Content-Type-Optionsä¸ºnosniffï¼Œé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸ºã€‚ Strict-Transport-SecurityHTTP Strict Transport Securityï¼Œé€šå¸¸ç®€ç§°ä¸ºHSTSï¼Œç”¨æ¥é€šçŸ¥æµè§ˆå™¨ä½¿ç”¨å®‰å…¨çš„HTTPSè¿æ¥è€Œä¸æ˜¯æœªåŠ å¯†çš„ HTTP åè®®ã€‚æœ‰ä¸¤ç§å–å€¼ï¼š max-age=&lt;MaxAgeInSeconds&gt;è¡¨ç¤ºåœ¨æœªæ¥çš„ä¸€æ®µæ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰å†…æµè§ˆå™¨éœ€è¦è®°ä½å½“å‰ç«™ç‚¹åªèƒ½é€šè¿‡ HTTPS è®¿é—®ã€‚ includeSubDomainså¯é€‰å€¼ï¼Œå¦‚æœæŒ‡å®šï¼Œè¡¨ç¤ºå½“å‰ç«™ç‚¹çš„æ‰€æœ‰å­åŸŸåä¹Ÿéœ€è¦ä½¿ç”¨ HTTPS è¿æ¥è®¿é—® preloadï¼ˆè¯‘è€…åŠ ï¼‰å¯é€‰å€¼ã€‚è°·æ­Œç»´æŠ¤ç€ä¸€ä¸ª HSTS é¢„åŠ è½½æœåŠ¡ã€‚æŒ‰ç…§å¦‚ä¸‹æŒ‡ç¤ºæˆåŠŸæäº¤ä½ çš„åŸŸååï¼Œæµè§ˆå™¨å°†ä¼šæ°¸ä¸ä½¿ç”¨éå®‰å…¨çš„æ–¹å¼è¿æ¥åˆ°ä½ çš„åŸŸåã€‚è™½ç„¶è¯¥æœåŠ¡æ˜¯ç”±è°·æ­Œæä¾›çš„ï¼Œä½†æ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰ä½¿ç”¨è¿™ä»½åˆ—è¡¨çš„æ„å‘ï¼ˆæˆ–è€…å·²ç»åœ¨ç”¨äº†ï¼‰ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æ˜¯ HSTS æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸è¯¥è¢«å½“ä½œæ­£å¼çš„å†…å®¹ã€‚ æ¨èé…ç½®Strict-Transport-Security åº”å½“è®¾ç½®ä¸ºç¨å¾®å¤§ä¸€äº›çš„å€¼ä¾‹å¦‚1å¹´ï¼ˆ31536000 ç§’ï¼‰ã€‚includeSubDomainsé€‰é¡¹å¯ä»¥çœ‹æƒ…å†µè®¾ç½®ã€‚1Strict-Transport-Security: max-age=31536000; includeSubDomains Content-Security-Policyæœ€é‡è¦ä¹Ÿæœ€å¤æ‚çš„Headerå¯èƒ½å°±æ˜¯CSPï¼Œå¾ˆå¤šæµè§ˆå™¨å·²ç»æ”¯æŒã€‚å¦‚æœé…ç½®å¾—å½“ï¼Œå•ä¸€çš„CSPå°±å¯ä»¥ä¸ºä½ çš„ç½‘ç«™ä¿é©¾æŠ¤èˆªã€‚ä½†æ˜¯å¦‚æœé…ç½®é”™è¯¯ï¼Œä¹Ÿå¯èƒ½å½±å“å·¨å¤§ã€‚CSPçš„åŠŸèƒ½ä¸»è¦å°±æ˜¯æŒ‡ç¤ºæµè§ˆå™¨å¯ä»¥ä»å“ªé‡Œä¸‹è½½è„šèƒŒä»¥åŠæœåŠ¡å™¨èµ„æºã€‚ä¸€ä¸ªCSP HeaderåŒ…å«ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæŒ‡ä»¤ä»¥åŠä¸€ä¸ªèµ„æºåˆ—è¡¨ã€‚æŒ‡ä»¤æŒ‡ç¤ºå½“å‰è®¾ç½®çš„èµ„æºç±»å‹ï¼Œèµ„æºåˆ—è¡¨é™åˆ¶å½“å‰æŒ‡ä»¤å¯ä»¥ä¸‹è½½çš„æºã€‚æ³¨æ„ï¼ŒCSPå¯ä»¥åŒ…å«å¤šä¸ªç­–ç•¥ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªHeaderé‡Œé¢é€šè¿‡åˆ†å·(;)åˆ†éš”å¤šæ¡æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªCSP Headerã€‚æ¯”å¦‚ï¼Œæˆ‘æƒ³è¦é…ç½®JSæ–‡ä»¶ä»æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨å’Œä¸€ä¸ªJS å­˜å‚¨ä»“åº“(js.example.com)ä¸‹è½½ï¼Œæ ·å¥½ä¼¼æ–‡ä»¶ä»…ä»æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸‹è½½ï¼Œæˆ‘å¯ä»¥é€šè¿‡å•ä¸€Header è®¾ç½®ï¼š1header(\"Content-Security-Policy: script-src 'self' js.example.com; style-src 'self';\", true); æˆ–è€…é€šè¿‡å¤šä¸ªHeader è®¾ç½®ï¼š12header(\"Content-Security-Policy: script-src 'self' js.example.com;\", false);header(\"Content-Security-Policy: style-src 'self';\", false); æ³¨æ„æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ›¿æ¢å·²å­˜åœ¨åŒåHeaderéœ€è¦æ”¹ä¸ºfalseï¼Œç”¨æ¥åŒæ—¶è®¾ç½®å¤šä¸ªåŒåHeaderã€‚ æŒ‡ä»¤ç±»å‹default-srcdefault-src ä»£è¡¨é»˜è®¤æŒ‡ä»¤ï¼Œå¦‚æœæ­£åœ¨è¯·æ±‚çš„èµ„æºç±»å‹æœªæ˜ç¡®å®šä¹‰ï¼Œå°†ä¼šä½¿ç”¨ default-src ç­–ç•¥ã€‚å¦‚æœç½‘é¡µæœ‰å›¾ç‰‡è¯·æ±‚ï¼Œä½†æ˜¯img-srcæ²¡æœ‰é…ç½®ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨default-srcçš„é…ç½®ã€‚ child-src(å·²å¼ƒç”¨)ä¹‹å‰ç”¨æ¥é…ç½® web workers ä»¥åŠåµŒå¥—æµè§ˆå™¨æ‰§è¡Œç¯å¢ƒæ¯”å¦‚ iframeã€‚ç„¶è€Œï¼Œframes å’Œ workers å¯èƒ½éœ€è¦å•ç‹¬é…ç½®ä¸åŒç­–ç•¥ï¼Œè¿™ä¸ªé€‰é¡¹å·²ç»è¢«frame-srcå’Œworker-srcå–ä»£ã€‚ connect-srcé™åˆ¶è„šæœ¬å¯ä»¥è¯·æ±‚çš„æºï¼ˆaæ ‡ç­¾ï¼Œpingsï¼Œfetchï¼ŒXMLHttpRequestï¼ŒWebSocketï¼ŒEventSourceï¼‰ font-srcé™åˆ¶å­—ä½“å¯ä»¥è¯·æ±‚çš„æºï¼ˆGoogle Fontsç­‰ï¼‰ frame-srcé™åˆ¶&lt;frame&gt; å’Œ &lt;iframe&gt;å¯ä»¥åŠ è½½çš„æº frame-ancestorsé™åˆ¶å½“å‰é¡µé¢å¯ä»¥è¢«&lt;frame&gt; å’Œ &lt;iframe&gt;åŠ è½½çš„æºï¼Œè®¾ç½®ä¸º&#39;none&#39;æ•ˆæœä¸ X-Frame-Options: DENY ç›¸åŒ img-srcé™åˆ¶å›¾ç‰‡å¯ä»¥åŠ è½½çš„æº manifest-srcé™åˆ¶ Application manifest æ–‡ä»¶å¯ä»¥åŠ è½½çš„æº media-srcé™åˆ¶åª’ä½“ï¼ˆ&lt;audio&gt; , &lt;video&gt;, &lt;track&gt;ï¼‰å¯ä»¥åŠ è½½çš„æº object-srcé™åˆ¶ &lt;object&gt;, &lt;embed&gt;, and &lt;applet&gt; å¯ä»¥åŠ è½½çš„æº prefech-srcé™åˆ¶é¢„è¯·æ±‚æˆ–é¢„æ¸²æŸ“çš„æº script-srcé™åˆ¶JSè„šæœ¬çš„æºã€‚åº”å½“æŒ‰éœ€æ±‚é…ç½®ä¸º&#39;self&#39;ä»¥åŠå¯ä¿¡çš„ç¬¬ä¸‰æ–¹CDNæºã€‚æ°¸è¿œä¸è¦å…è®¸&#39;unsafe-inline&#39;ï¼Œå¦åˆ™å†…è”è„šæœ¬çš„æ‰§è¡Œå¯èƒ½ä¼šå¯¼è‡´XSSæ”»å‡»ï¼Œä»è€Œç ´åæ•´ä¸ªCSPé…ç½®çš„åŠŸèƒ½ã€‚ style-srcé™åˆ¶CSSæ ·å¼çš„æº webrtc-srcé™åˆ¶WebRTC(Web Real-Time Communications)å¯ä»¥è¿æ¥çš„æº worker-srcé™åˆ¶Worker/SharedWorker/ServiceWorkerè„šæœ¬çš„æº form-actioné™åˆ¶è¡¨å•æäº¤çš„æº report-uriæŒ‡å®šç ´åCSPè§„åˆ™ä¸ŠæŠ¥çš„uri block-all-mixed-contentå¦‚æœé¡µé¢æ˜¯é€šè¿‡HTTPSåŠ è½½çš„ï¼Œè·³è¿‡æ‰€æœ‰HTTPèµ„æºè¯·æ±‚ *å…è®¸æ‰€æœ‰data stream(blob:, data:, filesystem:)ä»¥å¤–çš„æº â€˜noneâ€™ç¦æ­¢å½“å‰èµ„æºç±»å‹ä»ä»»æ„æºåŠ è½½ â€˜selfâ€™å½“å‰é¡µé¢æ‰€åœ¨æºï¼ˆåŒåè®®ï¼ŒåŒä¸»æœºåï¼ŒåŒç«¯å£ï¼‰ Data:æ•°æ®æµï¼ˆä¾‹å¦‚base64 ç¼–ç çš„å›¾ç‰‡åœ°å€ï¼‰ domain.example.comæŸä¸€ä¸ªæŒ‡å®šåŸŸå *.example.comæŸä¸€ä¸ªæŒ‡å®šåŸŸåä»¥åŠæ‰€æœ‰å­åŸŸå https://domain.example.comæŸä¸€ä¸ªæŒ‡å®šåŸŸåå¹¶ä¸”åªèƒ½é€šè¿‡HTTPS è¿æ¥ https:ä»»æ„é€šè¿‡HTTPSè¿æ¥çš„åŸŸå â€˜unsafe-inlineâ€™å…è®¸å†…è”ä»£ç ï¼ŒåŒ…æ‹¬å†…è”æ ·å¼æˆ–è„šæœ¬å—ï¼ˆè¯·å°½é‡é¿å…ä½¿ç”¨ï¼‰ â€˜unsafe-evalâ€™å…è®¸javascripteval()æ–¹æ³• â€˜nonce-&lt;noncevalue&gt;â€™å¯ä»¥åœ¨script/styleæ ‡ç­¾ä¸Šå¢åŠ ä¸€ä¸ªéšæœºæ•°ï¼Œåªæœ‰éšæœºæ•°ä¸noncevalueåŒ¹é…æ—¶ï¼Œç›¸åº”æ ‡ç­¾ä»£ç æ‰å¯ä»¥æ‰§è¡Œã€‚æ³¨æ„è¿™ä¸ªç­–ç•¥å·²ç»ç ´è§£ï¼Œå¯èƒ½ä¸å®‰å…¨ã€‚ â€˜sha256-&lt;hashvalue&gt;â€™script/styleçš„SHA256å“ˆå¸Œå€¼ä¸hashvalueåŒ¹é…ï¼Œç›¸åº”ä»£ç æ‰å¯ä»¥æ‰§è¡Œ æ¨èé…ç½®è¿™ä¸€é¡¹å¾ˆéš¾æœ‰ä¸€ä¸ªé€šç”¨çš„ç¡®åˆ‡å€¼ï¼Œå› ä¸ºéœ€è¦æ ¹æ®æ¯ä¸ªç½‘ç«™å…·ä½“é…ç½®ã€‚æˆ‘çš„åšæ³•ï¼ˆåœ¨ä»»ä½•å®‰å…¨ç›¸å…³çš„é—®é¢˜ï¼‰æ˜¯å°½å¯èƒ½æŠŠè§„åˆ™é…çš„å…·ä½“ï¼Œç„¶åæ‰¾åˆ°å†²çªçš„ç‚¹ï¼Œè§£å†³å†²çªæˆ–è€…æ”¾æ¾è§„åˆ™ï¼Œç›´åˆ°æ‰€æœ‰çš„é…ç½®éƒ½æ­£å¸¸å·¥ä½œã€‚è¿™é‡Œä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œä½†æ˜¯è¯·è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼šæ¯”å¦‚style-srcï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±ä¼šé…ç½®ä¸º&#39;self&#39;ç­–ç•¥ï¼Œè¡¨ç¤ºåªèƒ½ä»æœ¬åŸŸåŠ è½½ (.css) æ–‡ä»¶ã€‚ä½†ä½ çš„ä»£ç é‡Œé¢å¯èƒ½ä¼šæœ‰å°‘é‡å†…è”æ ·å¼ï¼Œè¿™æ—¶å€™æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿæœ€å¥½æ˜¯æŠŠè¿™äº›å†…è”æ ·å¼éƒ½ç§»åˆ°æŸä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¯ä»¥å¾ˆç®€å•çš„å®Œæˆï¼Œä½ å¯èƒ½ä¼šéœ€è¦å…è®¸&#39;unsafe-inline&#39;ã€‚æˆ‘è§‰å¾—ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯é€šè¿‡ä¸€é¡¹é¡¹æŸ¥çœ‹æˆ‘çš„æŸä¸ªé¡¹ç›®çš„CSPé…ç½®ï¼Œè¯´æ˜ä¸€ä¸‹æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆé…ç½®ï¼Œä»¥åŠè¿™ä¹ˆé…ç½®çš„è´Ÿé¢å½±å“ã€‚1default-src 'none'; é»˜è®¤é…ç½®ä¸ºæ‹’ç»æ‰€æœ‰æœªæŒ‡å®šèµ„æºç±»å‹çš„ä»»æ„åŠ è½½æºã€‚è€ƒè™‘åˆ°æˆ‘å·²ç»ä»”ç»†æ£€æŸ¥äº†å…¶ä»–æ‰€æœ‰èµ„æºç±»å‹çš„åŠ è½½ç­–ç•¥ï¼Œä¸åº”è¯¥æœ‰èµ„æºä¼šå›é€€åˆ°è¿™ä¸ªé…ç½®ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆè¿™ä¸ªèµ„æºä¸€å®šä¸æ˜¯ç”±æˆ‘æ·»åŠ çš„ã€‚æ³¨æ„ï¼šå…¶ä»–äººåœ¨æ–°å¢èµ„æºä½†æ˜¯æ— æ³•åŠ è½½æ—¶å¯èƒ½æ¥æ‰¾ä½ éº»çƒ¦ï¼Œå› æ­¤å¾ˆå¤šäººä¼šè®¾ç½®ä¸º&#39;self&#39;ã€‚1script-src 'self' https://js.stripe.com; æ‰€æœ‰çš„è„šæœ¬éƒ½å·²ç»æ‰“åŒ…ã€å‹ç¼©ï¼Œå› æ­¤ä¸åº”è¯¥å‡ºç°å†…è”è„šæœ¬ï¼Œåº”å½“é…ç½®ä¸º&#39;self&#39;ã€‚å¦å¤–ï¼Œæˆ‘ä½¿ç”¨ Stripe ä½œä¸ºæ”¯ä»˜ç½‘å…³ï¼Œæ‰€ä»¥è¦å…è®¸ Stripe çš„è„šæœ¬åº“ã€‚1connect-src 'self' https://api.stripe.com; æˆ‘çš„åº”ç”¨å¤§é‡ä½¿ç”¨Ajaxè¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ &#39;self&#39;ã€‚Stripe ä¹Ÿéœ€è¦ä½¿ç”¨è„šæœ¬è¯·æ±‚æ¥å£ï¼Œæ‰€ä»¥ä¹Ÿæ·»åŠ äº† Stripe çš„æœåŠ¡åŸŸåã€‚1img-src 'self' data:; 80å¹´ä»£çš„ç½‘é¡µæœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜å°±æ˜¯æ‰€æœ‰çš„å›¾ç‰‡éƒ½æ˜¯ç”±è‡ªå·±çš„æœåŠ¡å™¨æ‰˜ç®¡ï¼Œæ‰€ä»¥éœ€è¦&#39;self&#39;ã€‚å½“ç„¶ï¼Œç½‘é¡µé‡Œé¢ä¹Ÿä¼šç”¨åˆ°å†…è”SVGå›¾åƒï¼Œæ‰€ä»¥åŒ…å«äº†&#39;data:&#39;ã€‚1style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; æ ·å¼ä¸»è¦éƒ½æ˜¯è‡ªå·±æœåŠ¡å™¨æ‰˜ç®¡ï¼Œå°‘é‡ä½¿ç”¨ Google Fontsï¼Œæ‰€ä»¥æ·»åŠ äº†&#39;self&#39;å’ŒGoogle Fontsã€‚å¾ˆæƒ­æ„§æˆ‘ï¼ˆè™½ç„¶å¾ˆå°‘ä½†æ˜¯å¶å°”ä¼šï¼‰ä¹Ÿä½¿ç”¨äº†é¡µé¢å†…è”æ ·å¼ï¼Œæ‰€ä»¥æˆ‘æ·»åŠ äº†&#39;unsafe-inline&#39;ã€‚æ³¨æ„ï¼šå·²ç»æœ‰è¯æ®è¯æ˜å¯ä»¥é€šè¿‡CSSæ³¨å…¥è¯»å–è¡¨å•ä¿¡æ¯ï¼Œæ‰€ä»¥ä½ éœ€è¦é¢å¤–æ³¨æ„ä½¿ç”¨è¿™ä¸ªç­–ç•¥å¯èƒ½å¯¼è‡´çš„åº”ç”¨ç¨‹åºè„†å¼±æ€§ã€‚1font-src 'self' https://fonts.gstatic.com; è¿™ä¸ªä¹Ÿç›¸å½“ç®€å•ï¼Œæˆ‘è¦ç”¨åˆ°æˆ‘ä»¬è‡ªå·±çš„å’Œ Google æä¾›çš„å­—ä½“ï¼Œæ‰€ä»¥æ·»åŠ äº†&#39;self&#39;å’ŒGoogleçš„å­—ä½“åº“ã€‚1frame-src 'self' https://*.stripe.com https://stripe.com; è¿™ä¸ªç•¥å¾®æœ‰äº›å¤æ‚ï¼ŒStripe å…è®¸ä½¿ç”¨ 3D Secure ä¿æŠ¤å¡çš„æˆæƒç™»å½•ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹æ–¹æ¨èçš„å®ç°æ–¹å¼æ˜¯ä½¿ç”¨ Iframeï¼ˆæˆ‘ä¹Ÿè®¨åŒï¼‰ã€‚æ‰€ä»¥æˆ‘è¿™é‡Œæ·»åŠ  Stripe ä½œä¸ºæ”¯ä»˜ç½‘å…³ï¼Œ&#39;self&#39;åšä¸ºæˆæƒå®Œæˆä¹‹å Iframe çš„å›è·³åœ°å€ã€‚å¦‚æœä½ ä¹Ÿä½¿ç”¨Stripeï¼Œä½ å¯èƒ½çŸ¥é“ä»–ä»¬çš„æ–‡æ¡£è¯´æ˜åªéœ€è¦æ·»åŠ  https://js.stripe.com ä½œä¸º frame sourceï¼Œä½†æ˜¯æˆ‘æ“ä½œçš„è¿‡ç¨‹ä¸­å‘ç°ä¸€äº›é—®é¢˜ï¼Œæˆ‘æ­£åœ¨ä¸ä»–ä»¬çš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿåˆä½œæŠŠè¿™ä¸ªç­–ç•¥å°½é‡æ”¶ç´§ã€‚1frame-ancestors 'none'; ä¹‹å‰å·²ç»æåˆ°ï¼Œè¿™é¡¹é…ç½®å¯ä»¥ç¦æ­¢å½“å‰ç½‘é¡µè¢«ä»»ä½•ç½‘ç«™é€šè¿‡ Iframe åµŒå…¥åŠ è½½ã€‚æ³¨æ„ï¼šæˆ‘åœ¨ 3D Secure çš„æˆæƒå›è·³é¡µé¢ä¸Šé¢æŠŠè¿™é¡¹é…ç½®æ”¾é€åˆ°&#39;self&#39;ï¼Œè¿™æ ·æˆ‘è‡ªå·±çš„ç½‘ç«™æ‰å¯ä»¥é€šè¿‡IframeåŠ è½½å›è·³é¡µé¢ã€‚1report-uri /csp-report.php; æ‰€æœ‰ç ´åCSPè§„åˆ™çš„å¼‚å¸¸éƒ½ä¼šè¢«ä¸ŠæŠ¥ï¼ˆç”±å®¢æˆ·ç«¯æµè§ˆå™¨ï¼‰åˆ°è¿™ä¸ªåœ°å€ï¼Œè®°å½•ä¸‹æ¥ä»¥ååˆ†æä½¿ç”¨ã€‚1block-all-mixed-content; æœ€åï¼Œå°½ç®¡æˆ‘æ²¡æœ‰ä»»ä½•æ··åˆå†…å®¹ï¼ˆè¯‘è€…ï¼šä¸é¡µé¢åè®®ä¸ä¸€è‡´çš„åŠ è½½æ–¹å¼ï¼Œä¾‹å¦‚é¡µé¢ä½¿ç”¨HTTPSï¼Œè€ŒæŸä¸€å›¾ç‰‡ä½¿ç”¨HTTPï¼‰ï¼Œé˜²æ­¢æ„å¤–æˆ‘è¿˜æ˜¯æ·»åŠ äº†è¿™æ¡ç¦æ­¢ç­–ç•¥ã€‚ å…¶ä»–æŒ‡ä»¤çš„æ³¨æ„ç‚¹ï¼š ç»å¤§éƒ¨åˆ†å…¶ä»–æŒ‡ä»¤ç­–ç•¥éƒ½ä¼šå›é€€åˆ° default-src ç„¶åè¢«ç¦æ­¢ã€‚æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šworker-src åœ¨å¾ˆå¤šæµè§ˆå™¨ï¼ˆChrome 59ä»¥ä¸Šä¼šå¿½ç•¥child-srcç›´æ¥å›é€€åˆ°default-src, Edge 17 ä¼šå¿½ç•¥ script-srcï¼‰ä¸­ä¼šå›é€€åˆ° child-src -&gt; script-src ã€‚ä¸è®¾ç½® plugin-types æŒ‡ä»¤ï¼Œåœ¨æŠ€æœ¯ä¸Šä¼šé»˜è®¤å…è®¸æ‰€æœ‰çš„æ‰©å±•ç±»å‹ (&lt;embed&gt;, &lt;object&gt;, &lt;applet&gt;)ï¼Œä½†åŒæ—¶æˆ‘ä»¬æ²¡æœ‰é…ç½® object-srcï¼Œè¿™é¡¹ç­–ç•¥ä¼šé™çº§åˆ° default-src ä»è€Œåœ¨åŠ è½½å±‚é¢ç¦æ­¢æ‰€æœ‰çš„æ‰©å±•ã€‚ ä»£ç ç¤ºä¾‹Apache Web Server12345Header set X-Frame-Options \"SAMEORIGIN\"Header set X-XSS-Protection \"1; mode=block\"Header set X-Content-Type-Options \"nosniff\"Header set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"Header set Content-Security-Policy \"default-src 'none'; script-src 'self' https://js.stripe.com; connect-src 'self' https://api.stripe.com; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https://*.stripe.com https://stripe.com; frame-ancestors 'none'; report-uri /csp_report.php; block-all-mixed-content;\" Nginx12345add_header X-Frame-Options \"SAMEORIGIN\"add_header X-XSS-Protection \"1; mode=block\"add_header X-Content-Type-Options \"nosniff\"add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\"add_header Content-Security-Policy \"default-src 'none'; script-src 'self' https://js.stripe.com; connect-src 'self' https://api.stripe.com; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https://*.stripe.com https://stripe.com; frame-ancestors 'none'; report-uri /csp_report.php; block-all-mixed-content;\" IIS123456789&lt;httpProtocol&gt; &lt;customHeaders&gt; &lt;add name=\"X-Frame-Options\" value=\"SAMEORIGIN\" /&gt; &lt;add name=\"X-XSS-Protection\" value=\"1; mode=block\" /&gt; &lt;add name=\"X-Content-Type-Options\" value=\"nosniff\" /&gt; &lt;add name=\"Strict-Transport-Security\" value=\"max-age=31536000; includeSubDomains\"/&gt; &lt;add name=\"Content-Security-Policy\" value=\"default-src 'none'; script-src 'self' https://js.stripe.com; connect-src 'self' https://api.stripe.com; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https://*.stripe.com https://stripe.com; frame-ancestors 'none'; report-uri /csp_report.php; block-all-mixed-content;\" /&gt; &lt;/customHeaders&gt;&lt;/httpProtocol&gt; PHP1234567header('[HeaderName]: [HeaderValue]', true);header('X-Frame-Options: SAMEORIGIN');header('X-XSS-Protection: 1; mode=block');header('X-Content-Type-Options: nosniff');header('Strict-Transport-Security: max-age=31536000; includeSubDomains');header('Content-Security-Policy: default-src \\'none\\'; script-src \\'self\\' https://js.stripe.com; connect-src \\'self\\' https://api.stripe.com; img-src \\'self\\' data:; style-src \\'self\\' \\'unsafe-inline\\' https://fonts.googleapis.com; font-src \\'self\\' https://fonts.gstatic.com; frame-src \\'self\\' https://*.stripe.com https://stripe.com; frame-ancestors \\'none\\'; report-uri /csp_report.php; block-all-mixed-content;'); ASP.NET123456789protected void Application_BeginRequest(object sender, EventArgs e)&#123; HttpContext.Current.Response.AddHeader(\"X-Frame-Options\", \"SAMEORIGIN\"); HttpContext.Current.Response.AddHeader(\"X-XSS-Protection\", \"1; mode=block\"); HttpContext.Current.Response.AddHeader(\"X-Content-Type-Options\", \"nosniff\"); HttpContext.Current.Response.AddHeader(\"Strict-Transport-Security\", \"max-age=31536000; includeSubDomains\"); HttpContext.Current.Response.AddHeader(\"Content-Security-Policy\", \"default-src 'none'; script-src 'self' https://js.stripe.com; connect-src 'self' https://api.stripe.com; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https://*.stripe.com https://stripe.com; frame-ancestors 'none'; report-uri /csp_report.php; block-all-mixed-content;\");&#125; ä¸‹é›†é¢„å‘Šè¯·å…ˆé˜…è¯»æœ‰å…³ä½¿ç”¨ HSTS Preloading çš„é™„å½•ï¼Œç„¶åç»§ç»­é˜…è¯»ç¬¬äºŒç¯‡ï¼šCookieæ”»é˜²å®æˆ˜ã€‚å…³æ³¨ä½œè€…ï¼šTwitterè¯‘è€…å¾®è–„ï¼šæ–°æµªå¾®åš åˆŠè¯¯å¦‚æœä½ æœ‰ä»»ä½•æ„è§æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼šsupport@int64software.com ã€‚è¯‘è€…é‚®ç®±ï¼šmrzzcn@gmail.com ã€‚","categories":[{"name":"Translate","slug":"Translate","permalink":"https://mrzzcn.github.io/categories/Translate/"},{"name":"Technology","slug":"Translate/Technology","permalink":"https://mrzzcn.github.io/categories/Translate/Technology/"}],"tags":[{"name":"Web","slug":"Web","permalink":"https://mrzzcn.github.io/tags/Web/"},{"name":"HTTP","slug":"HTTP","permalink":"https://mrzzcn.github.io/tags/HTTP/"},{"name":"Headers","slug":"Headers","permalink":"https://mrzzcn.github.io/tags/Headers/"},{"name":"Security","slug":"Security","permalink":"https://mrzzcn.github.io/tags/Security/"}]},{"title":"BFC","slug":"bfc","date":"2018-12-28","updated":"2019-04-27","comments":true,"path":"2018/12/28/bfc/","link":"","permalink":"https://mrzzcn.github.io/2018/12/28/bfc/","excerpt":"1. å«ä¹‰ å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰ æ˜¯Webé¡µé¢çš„å¯è§†åŒ–CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¸ƒå±€è¿‡ç¨‹ä¸­ç”Ÿæˆå—çº§ç›’å­çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„äº¤äº’é™å®šåŒºåŸŸã€‚ ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼š æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ float ä¸æ˜¯ noneï¼‰ ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ position ä¸º absolute æˆ– fixedï¼‰ è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º inline-blockï¼‰ è¡¨æ ¼å•å…ƒæ ¼ï¼ˆå…ƒç´ çš„ displayä¸º table-cellï¼ŒHTMLè¡¨æ ¼å•å…ƒæ ¼é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ è¡¨æ ¼æ ‡é¢˜ï¼ˆå…ƒç´ çš„ display ä¸º table-captionï¼ŒHTMLè¡¨æ ¼æ ‡é¢˜é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆå…ƒç´ çš„ displayä¸º tableã€table-rowã€ table-row-groupã€table-header-groupã€table-footer-groupï¼ˆåˆ†åˆ«æ˜¯HTML tableã€rowã€tbodyã€theadã€tfootçš„é»˜è®¤å±æ€§ï¼‰æˆ– inline-tableï¼‰ overflow å€¼ä¸ä¸º visible çš„å—å…ƒç´  display å€¼ä¸º flow-root çš„å…ƒç´  contain å€¼ä¸º layoutã€contentæˆ– strict çš„å…ƒç´  å¼¹æ€§å…ƒç´ ï¼ˆdisplayä¸º flex æˆ– inline-flexå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ ç½‘æ ¼å…ƒç´ ï¼ˆdisplayä¸º grid æˆ– inline-grid å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ å¤šåˆ—å®¹å™¨ï¼ˆå…ƒç´ çš„ column-count æˆ– column-width ä¸ä¸º autoï¼ŒåŒ…æ‹¬ column-count ä¸º 1ï¼‰column-span ä¸º all çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆæ ‡å‡†å˜æ›´ï¼ŒChrome bugï¼‰ã€‚","text":"1. å«ä¹‰ å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰ æ˜¯Webé¡µé¢çš„å¯è§†åŒ–CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¸ƒå±€è¿‡ç¨‹ä¸­ç”Ÿæˆå—çº§ç›’å­çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„äº¤äº’é™å®šåŒºåŸŸã€‚ ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼š æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ float ä¸æ˜¯ noneï¼‰ ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ position ä¸º absolute æˆ– fixedï¼‰ è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º inline-blockï¼‰ è¡¨æ ¼å•å…ƒæ ¼ï¼ˆå…ƒç´ çš„ displayä¸º table-cellï¼ŒHTMLè¡¨æ ¼å•å…ƒæ ¼é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ è¡¨æ ¼æ ‡é¢˜ï¼ˆå…ƒç´ çš„ display ä¸º table-captionï¼ŒHTMLè¡¨æ ¼æ ‡é¢˜é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆå…ƒç´ çš„ displayä¸º tableã€table-rowã€ table-row-groupã€table-header-groupã€table-footer-groupï¼ˆåˆ†åˆ«æ˜¯HTML tableã€rowã€tbodyã€theadã€tfootçš„é»˜è®¤å±æ€§ï¼‰æˆ– inline-tableï¼‰ overflow å€¼ä¸ä¸º visible çš„å—å…ƒç´  display å€¼ä¸º flow-root çš„å…ƒç´  contain å€¼ä¸º layoutã€contentæˆ– strict çš„å…ƒç´  å¼¹æ€§å…ƒç´ ï¼ˆdisplayä¸º flex æˆ– inline-flexå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ ç½‘æ ¼å…ƒç´ ï¼ˆdisplayä¸º grid æˆ– inline-grid å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ å¤šåˆ—å®¹å™¨ï¼ˆå…ƒç´ çš„ column-count æˆ– column-width ä¸ä¸º autoï¼ŒåŒ…æ‹¬ column-count ä¸º 1ï¼‰column-span ä¸º all çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆæ ‡å‡†å˜æ›´ï¼ŒChrome bugï¼‰ã€‚ å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡åŒ…å«åˆ›å»ºå®ƒçš„å…ƒç´ å†…éƒ¨çš„æ‰€æœ‰å†…å®¹. å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å¯¹æµ®åŠ¨å®šä½ï¼ˆå‚è§ floatï¼‰ä¸æ¸…é™¤æµ®åŠ¨ï¼ˆå‚è§ clearï¼‰éƒ½å¾ˆé‡è¦ã€‚æµ®åŠ¨å®šä½å’Œæ¸…é™¤æµ®åŠ¨æ—¶åªä¼šåº”ç”¨äºåŒä¸€ä¸ªBFCå†…çš„å…ƒç´ ã€‚æµ®åŠ¨ä¸ä¼šå½±å“å…¶å®ƒBFCä¸­å…ƒç´ çš„å¸ƒå±€ï¼Œè€Œæ¸…é™¤æµ®åŠ¨åªèƒ½æ¸…é™¤åŒä¸€BFCä¸­åœ¨å®ƒå‰é¢çš„å…ƒç´ çš„æµ®åŠ¨ã€‚å¤–è¾¹è·æŠ˜å ï¼ˆMargin collapsingï¼‰ä¹Ÿåªä¼šå‘ç”Ÿåœ¨å±äºåŒä¸€BFCçš„å—çº§å…ƒç´ ä¹‹é—´ã€‚â€“ MDN æˆ³æ­¤æŸ¥çœ‹ 2. åº”ç”¨åŒä¸€ä¸ª BFC ä¸‹å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å See the Pen aPyrXL by Jack (@zhangzhen) on CodePen. å‰ä¸¤ä¸ªå…ƒç´ ï¼ˆ1-1 1-2ï¼‰ä½äºåŒä¸€ä¸ªBFCå†…éƒ¨ï¼Œæ‰€ä»¥ä¸Šè¾¹å…ƒç´ çš„ margin-bottom ä¸ ä¸‹è¾¹å…ƒç´ çš„ margin-top å‘ç”Ÿåç¼©ï¼Œåç¼©çš„ç»“æœä¸ºæœ€ç»ˆçš„ margin å€¼æ˜¯ä¸¤è€…ä¸­çš„è¾ƒå¤§å€¼.åä¸¤ä¸ªå…ƒç´ ï¼ˆ2-1 3-1ï¼‰ä½äºä¸åŒBFCå†…éƒ¨ï¼Œæ‰€ä»¥æ²¡æœ‰å‘ç”Ÿåç¼©ï¼Œæœ€ç»ˆ margin ç­‰äºä¸Šè¾¹å…ƒç´ çš„ margin-bottom åŠ ä¸‹è¾¹å…ƒç´ çš„ margin-top åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰See the Pen BFC å¯ä»¥åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰ by Jack (@zhangzhen) on CodePen. ä¸Šæ–¹å®¹å™¨Parent 1å†…å…ƒç´ æµ®åŠ¨ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œæ‰€ä»¥å®¹å™¨åªå‰©ä¸‹ 2px çš„è¾¹è·é«˜åº¦ã€‚å¦‚æœä½¿è§¦å‘å®¹å™¨çš„ BFCï¼Œé‚£ä¹ˆå®¹å™¨å°†ä¼šåŒ…è£¹ç€æµ®åŠ¨å…ƒç´ ï¼ˆParent 2ï¼‰ã€‚ é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–See the Pen BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›– by Jack (@zhangzhen) on CodePen. ä¸Šè¾¹çš„å¸ƒå±€æ˜¯ä¸€ä¸ªå¸¸è§çš„å›¾æ–‡æ··æ’çš„æ¨¡ç‰ˆï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦è¿™ç§å¸ƒå±€ï¼Œæˆ‘ä»¬æœŸæœ›ä¸€ä¸ªå·¦å³å¸ƒå±€çš„é¡µé¢ï¼Œå¦‚ä¸‹è¾¹çš„Demoå±•ç¤ºçš„è¿™ç§ï¼Œå°±å¯ä»¥é€šè¿‡è§¦å‘ä¸‹é¢å…ƒç´ çš„ BFC æ¥å®ç°ã€‚ è¿™ä¸ªæ–¹æ³•æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€ï¼Œå·¦è¾¹å®½åº¦å›ºå®šï¼Œå³è¾¹çš„å†…å®¹è‡ªé€‚åº”å®½åº¦(å»æ‰ä¸Šé¢å³è¾¹å†…å®¹çš„å®½åº¦)ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°å¤šåˆ—å¸ƒå±€ï¼Œä¹Ÿæ˜¯ç›¸å½“æ–¹ä¾¿ã€‚ 3. (*)FCFC å³ Formatting Contextsï¼ŒåŒ…å«ï¼šIFCã€BFCã€GFC ä¸ FFC ã€‚FCæ˜¯ç½‘é¡µCSSè§†è§‰æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå†³å®šç›’å­æ¨¡å‹çš„å¸ƒå±€ã€å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚å…¶ä¸­ï¼šIFCï¼ˆInline Formatting Contextsï¼‰ä¸ BFCï¼ˆBlock Formatting Contextsï¼‰æ˜¯ CSS2.1 è§„èŒƒä¸­å¼•è¿›çš„ï¼›åé¢ä¸¤ä¸ªæ˜¯ CSS3 æ–°å¢è§„èŒƒï¼ŒGFCï¼ˆGridLayout Formatting Contextsï¼‰ä»¥åŠ FFCï¼ˆFlex Formatting Contextï¼‰ã€‚ å…³äºè¿™å‡ ä¸ª FC çš„å…·ä½“åŒºåˆ«å¯å‚è€ƒï¼šhttps://github.com/chokcoco/iCSS/issues/5 å‚è€ƒé“¾æ¥https://zhuanlan.zhihu.com/p/25321647https://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/https://github.com/chokcoco/iCSS/issues/5","categories":[{"name":"Technology","slug":"Technology","permalink":"https://mrzzcn.github.io/categories/Technology/"},{"name":"CSS","slug":"Technology/CSS","permalink":"https://mrzzcn.github.io/categories/Technology/CSS/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://mrzzcn.github.io/tags/éšç¬”/"},{"name":"CSS","slug":"CSS","permalink":"https://mrzzcn.github.io/tags/CSS/"},{"name":"BFC","slug":"BFC","permalink":"https://mrzzcn.github.io/tags/BFC/"}]},{"title":"[ç¿»è¯‘]Arrow Functions in Class Properties Might Not Be As Great As We Think","slug":"arrow-function-in-class-property","date":"2018-11-17","updated":"2019-04-27","comments":true,"path":"2018/11/17/arrow-function-in-class-property/","link":"","permalink":"https://mrzzcn.github.io/2018/11/17/arrow-function-in-class-property/","excerpt":"Javascript æ–°å¢äº† arrow function å’Œ classï¼Œè¿™ä¸¤è€…çš„æ¦‚å¿µå¯å‚è€ƒï¼šarrow functionï¼Œç±»ã€‚React é‡Œé¢çš„æ–¹æ³•æƒ³è¦åœ¨JSXä¸­ä½¿ç”¨ï¼Œå¿…é¡»æ‰‹åŠ¨ç»‘å®š thisï¼Œæœ‰äº›äººä¼šåœ¨è¿™å„¿ä½¿ç”¨ç®­å¤´å‡½æ•°ç®€å†™æ‰ this.method = this.method.bind(this); è¿™è¡Œä»£ç ï¼Œæœ¬æ–‡ä½œè€…å¯¹è¿™ç§å†™æ³•è¿›è¡Œäº†åˆ†æï¼ŒåŸæ–‡åœ¨æ­¤ï¼šArrow Functions in Class Properties Might Not Be As Great As We Think","text":"Javascript æ–°å¢äº† arrow function å’Œ classï¼Œè¿™ä¸¤è€…çš„æ¦‚å¿µå¯å‚è€ƒï¼šarrow functionï¼Œç±»ã€‚React é‡Œé¢çš„æ–¹æ³•æƒ³è¦åœ¨JSXä¸­ä½¿ç”¨ï¼Œå¿…é¡»æ‰‹åŠ¨ç»‘å®š thisï¼Œæœ‰äº›äººä¼šåœ¨è¿™å„¿ä½¿ç”¨ç®­å¤´å‡½æ•°ç®€å†™æ‰ this.method = this.method.bind(this); è¿™è¡Œä»£ç ï¼Œæœ¬æ–‡ä½œè€…å¯¹è¿™ç§å†™æ³•è¿›è¡Œäº†åˆ†æï¼ŒåŸæ–‡åœ¨æ­¤ï¼šArrow Functions in Class Properties Might Not Be As Great As We Think è‡ª2016å¹´ä»¥æ¥ï¼Œ Class Properties Proposal è®©æˆ‘ä»¬çš„ä»£ç ç®€æ´äº†è®¸å¤šï¼Œç‰¹åˆ«æ˜¯åœ¨ React çš„ state ä¹¦å†™æˆ–è€…åœ¨å£°æ˜é™æ€æˆå‘˜ propTypes å’Œ defaultProps çš„æ—¶å€™ã€‚çœ‹ä¸‹ä»£ç ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041// Class properties ä»¥å‰class Greeting extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; isLoading: false &#125;; &#125; render() &#123; return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;; &#125;&#125;Greeting.protoTypes = &#123; name: ProtoTypes.String.Required&#125;;Greeting.defaultProps = &#123; name: 'Stranger'&#125;;// Class properties ä¹‹åclass Greeting extends Component &#123; static protoTypes = &#123; name: ProtoTypes.String.Required &#125;; static defaultProps = &#123; name: 'Stranger' &#125;; state = &#123; isLoading: false &#125;; render() &#123; return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;; &#125;&#125; å¦å¤–ï¼Œåœ¨ React é‡Œé¢éœ€è¦å¤„ç†thisç»‘å®šçš„æ—¶å€™ï¼Œç›´æ¥ä»¥å±æ€§å£°æ˜è€Œä¸å†ä½¿ç”¨ constructor èµ‹å€¼æ–¹å¼åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œé¢ä¹Ÿè¶Šæ¥è¶Šæˆä¸ºä¸€ç§è¶‹åŠ¿ã€‚Twitteré“¾æ¥12345678910// Usage example of arrow function in a class property.class ComponentA extends Component &#123; handleClick = () =&gt; &#123; // ... &#125; render() &#123; // ... &#125;&#125; ç®­å¤´å‡½æ•°åœ¨å£°æ˜å±æ€§æ—¶å€™å¾ˆæ–¹ä¾¿ï¼Œè‡ªåŠ¨ç»‘å®š thisï¼Œä¸éœ€è¦åœ¨ constructor é‡Œæ·»åŠ  this.handleClick = this.handleClick.bind(this).ä½†æ˜¯ï¼Œæˆ‘ä»¬çœŸçš„å¯ä»¥è¿™ä¹ˆç”¨å—ï¼Ÿé¦–å…ˆæ¥çœ‹ä¸€ä¸‹ç±»å±æ€§ç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°è‡ªåŠ¨ç»‘å®šçš„ï¼š ç®­å¤´å‡½æ•°æ˜¯æ€ä¹ˆç¼–è¯‘åˆ°ES2017çš„ç¼–å†™ä¸€ä¸ªåŒ…å«é™æ€å±æ€§ï¼Œå®ä¾‹å±æ€§ï¼Œç®­å¤´å‡½æ•°å±æ€§ï¼Œå¦å¤–ä¸€ä¸ªå¸¸è§æˆå‘˜æ–¹æ³•çš„ç±»ï¼Œä½¿ç”¨ transform-class-properties æ’ä»¶ç¼–è¯‘.123456789101112class A &#123; static color = \"red\"; counter = 0; handleClick = () =&gt; &#123; this.counter++; &#125; handleLongClick() &#123; this.counter++; &#125;&#125; ä½¿ç”¨ Babel REPL ç¼–è¯‘è¿™ä¸ªç±»åˆ°ES2017 æ ¼å¼ï¼Œç¼–è¯‘æ’ä»¶ï¼šes2017 stage-2ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ä»£ç ï¼š æ‰“å¼€ Babel é‡Œé¢æŸ¥çœ‹ä»£ç æ—¶å¦‚æœç¼–è¯‘å‡ºé”™ï¼Œè¯·åœ¨å·¦ä¸‹è§’æ·»åŠ  Plugin ï¼š babel-plugin-transform-class-properties 1234567891011121314class A &#123; constructor() &#123; this.counter = 0; this.handleClick = () =&gt; &#123; this.counter++; &#125;; &#125; handleLongClick() &#123; this.counter++; &#125;&#125;A.color = \"red\"; æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹ï¼šç‚¹å‡»æŸ¥çœ‹ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ å®ä¾‹å±æ€§è¢«ç§»åŠ¨åˆ° constructor å†…éƒ¨ï¼Œé™æ€æˆå‘˜è¢«ç§»åŠ¨åˆ°ç±»å£°æ˜å®Œæˆä¹‹åstatic å…³é”®å­—å¯ä»¥çœç•¥é¢å¤–çš„é™æ€å±æ€§å£°æ˜ä»£ç ï¼Œç„¶åå¯ä»¥ç›´æ¥export class XXX extends Componentï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢è¿™ç‚¹å®ä¾‹å±æ€§è¡¨ç°ä¹Ÿä¸é”™ï¼Œåœ¨æ²¡æœ‰ç¼–è¯‘çš„ç‰ˆæœ¬ä¸­ï¼Œç±»å£°æ˜ç®€æ´äº†è®¸å¤šä½†æ˜¯ï¼Œç®­å¤´å‡½æ•°å£°æ˜çš„å±æ€§ handleClick ä¹Ÿè¢«ç§»åŠ¨åˆ°äº† constructorï¼Œä¸æ™®é€šçš„å®ä¾‹å±æ€§ç±»ä¼¼æ­£å¸¸çš„æˆå‘˜æ–¹æ³• handleLongClick æ²¡æœ‰æ”¹å˜å±æ€§è‡ªåŠ¨åˆå§‹åŒ–å¯¹äºæ­£å¸¸çš„å±æ€§æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°å£°æ˜çš„å±æ€§ï¼Œå±äºHackå¾—åˆ°ä¸€ä¸ª this ç»‘å®šä½ æœ‰æ²¡æœ‰å‘ç°é—®é¢˜ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹æˆ‘çš„å‘ç° Mockabilityå¦‚æœæˆ‘ä»¬æƒ³è¦ mock ä¸€ä¸ªç±»çš„æŸä¸€ä¸ªæ–¹æ³•ï¼Œ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä¿®æ”¹ prototypeï¼Œè¿™ä¼šå¯¹è¿™ä¸ªç±»åŸå‹é“¾ä¸Šæ‰€æœ‰çš„å¯¹è±¡ç”Ÿæ•ˆæˆ‘ä»¬çœ‹ä¸‹ä½¿ç”¨è¿™ç§æ–¹å¼æµ‹è¯•ä¹‹å‰çš„ç±» A ä¼šå‘ç”Ÿä»€ä¹ˆï¼šæˆ‘ä»¬ç»§ç»­æŠŠä¹‹å‰çš„ç±» A ç¼–è¯‘åˆ° ES2015: ç‚¹å‡»æŸ¥çœ‹12345678910111213141516171819202122232425262728293031323334353637383940414243class A &#123; static color = \"red\"; counter = 0; handleClick = () =&gt; &#123; this.counter++; &#125; handleLongClick() &#123; this.counter++; &#125;&#125;// ç¼–è¯‘è¾“å‡º\"use strict\";function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125;&#125;var A = (function() &#123; function A() &#123; var _this = this; _classCallCheck(this, A); this.counter = 0; this.handleClick = function() &#123; _this.counter++; &#125;; &#125; A.prototype.handleLongClick = function handleLongClick() &#123; this.counter++; &#125;; return A;&#125;)();A.color = \"red\"; A.prototype.handleLongClick æœ‰æ•ˆ.A.prototype.handleClick æœªå®šä¹‰. å®~ï¼Œ ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰çš„ handleClick ç¼–è¯‘ä¹‹åè¢«ç§»åŠ¨åˆ°æ„é€ å‡½æ•°é‡Œé¢ä½¿ç”¨å®ä¾‹å£°æ˜ï¼Œè€Œä¸æ˜¯ç±»æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å®ä¾‹ä¸Š Mock è¿™ç§æ–¹å¼å®šä¹‰çš„æ–¹æ³•ï¼Œè¿™äº›æ›´æ”¹æ— æ³•åŒæ­¥åˆ°å…¶ä»–å¯¹è±¡ã€‚ Inheritanceé¦–å…ˆå®šä¹‰ class A .123456789101112131415161718class A &#123; handleClick = () =&gt; &#123; console.log(\"A.handleClick\"); &#125; handleLongClick() &#123; console.log(\"A.handleLongClick\"); &#125;&#125;console.log(A.prototype);// &#123;constructor: Æ’, handleLongClick: Æ’&#125;new A().handleClick();// A.handleClicknew A().handleLongClick();// A.handleLongClick å¦‚æœ class B ç»§æ‰¿ class Aï¼Œç”±äº handleClick æ˜¯ä¸åœ¨ prototype ä¸Šå®šä¹‰çš„ï¼Œclass B å†…éƒ¨æ— æ³•é€šè¿‡ super.handleClick è°ƒç”¨çˆ¶ç±»æ–¹æ³•1234567891011121314151617181920212223242526class B extends A &#123; handleClick = () =&gt; &#123; super.handleClick(); console.log(\"B.handleClick\"); &#125; handleLongClick() &#123; super.handleLongClick(); console.log(\"B.handleLongClick\"); &#125;&#125;console.log(B.prototype);// A &#123;constructor: Æ’, handleLongClick: Æ’&#125;console.log(B.prototype.__proto__);// &#123;constructor: Æ’, handleLongClick: Æ’&#125;new B().handleClick();// Uncaught TypeError: (intermediate value).handleClick is not a functionnew B().handleLongClick();// A.handleLongClick// B.handleLongClick class C ç»§æ‰¿ class Aï¼Œä½†æ˜¯ä½¿ç”¨ç±»æˆå‘˜è€Œä¸æ˜¯ç®­å¤´å‡½æ•°é‡æ–°å®ç°äº† handleClick æ–¹æ³•ï¼Œè¿™æ—¶ handleClick å°†åªä¼šæ‰§è¡Œ super.handleClick, è€Œä¸ä¼šæ‰§è¡Œè‡ªå·±å®šä¹‰çš„ä»£ç ï¼ˆåªæ‰§è¡Œçˆ¶ç±»å®šä¹‰çš„æ–¹æ³•ï¼‰ï¼Œå¥‡æ€ªäº†ï¼Ÿ è¿™æ—¶å› ä¸ºçˆ¶ç±»çš„æ„é€ å‡½æ•°é‡å†™äº†handleClickæ–¹æ³•ã€‚ C.prototype.handleClick()ä¼šè°ƒç”¨class Cçš„ handleClickæ–¹æ³•ï¼Œä½†æ˜¯ä¼šæŠ¥é”™: Uncaught TypeError: (intermediate value).handleClick is not a function .12345678910111213141516class C extends A &#123; handleClick() &#123; super.handleClick(); console.log(\"C.handleClick\"); &#125;&#125;console.log(C.prototype);// A &#123;constructor: Æ’, handleClick: Æ’&#125;console.log(C.prototype.__proto__);// &#123;constructor: Æ’, handleLongClick: Æ’&#125;new C().handleClick();// A.handleClick æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹å‡»é“¾æ¥æŸ¥çœ‹åŸå› ã€‚ class D ä»¥å­—é¢é‡å¯¹è±¡æ–¹å¼ç»§æ‰¿ class Aï¼ŒD å°†æ‹¥æœ‰ä¸€ä¸ªç©ºçš„ prototypeï¼Œnew D().handleClick() ä¼šæ‰“å° A.handleClick:12345678910class D extends A &#123;&#125;console.log(D.prototype);// A &#123;constructor: Æ’&#125;console.log(D.prototype.__proto__);// &#123;constructor: Æ’, handleLongClick: Æ’&#125;new D().handleClick();// A.handleClick Performanceç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¯”è¾ƒæœ‰è¶£çš„éƒ¨åˆ†ï¼šæ€§èƒ½ æˆ‘ä»¬çŸ¥é“æ–¹æ³•é€šå¸¸éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šé¢ï¼Œè¿™æ ·å®šä¹‰çš„æ–¹æ³•ä¼šåœ¨æ‰€æœ‰å®ä¾‹ä¸Šå…±äº«. ä¸€ä¸ªç»„ä»¶åˆ—è¡¨é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶éƒ½åˆ†äº«ç›¸åŒçš„æ–¹æ³•. åˆ—è¡¨é‡Œé¢çš„æ¯ä¸ªç»„ä»¶è¢«ç‚¹å‡», éƒ½ä¼šæ‰§è¡Œç‚¹å‡»äº‹ä»¶, ä½†æ˜¯æ— è®ºå“ªä¸ªç»„ä»¶ç‚¹å‡»éƒ½æ˜¯è°ƒç”¨åŸå‹é“¾ä¸ŠåŒä¸€ä¸ªæ–¹æ³•. å› ä¸ºæ˜¯åŒä¸€ä¸ªæ–¹æ³•å¤šæ¬¡è°ƒç”¨, JSå¼•æ“ä¼šä¼˜åŒ–è¿™ä¸ªæ–¹æ³•. ä¸æ­¤ç›¸å¯¹, ç±»ä¸­ç®­å¤´å‡½æ•°å®šä¹‰çš„æ–¹æ³•, åœ¨å¤šä¸ªç»„ä»¶å®ä¾‹ä¸­ä¼šåˆ›å»ºå¤šä¸ªæ–¹æ³•. è¿˜è®°å¾—åˆšæ‰æˆ‘ä»¬çœ‹åˆ°çš„ç¼–è¯‘è¾“å‡ºå—, ç®­å¤´å‡½æ•°æˆå‘˜åœ¨æ„é€ æ–¹æ³•ä¸­å£°æ˜. æ¯ä¸ªç»„ä»¶è¢«ç‚¹å‡», æ‰§è¡Œçš„éƒ½æ˜¯ä¸åŒçš„æ–¹æ³•. æˆ‘ä»¬çœ‹ä¸‹åœ¨V8 Engine(Chrome)ä¸‹äºŒè€…çš„è¡¨ç°å·®å¼‚: ç¬¬ä¸€ä¸ªæµ‹è¯•æ¯”è¾ƒç®€å•, åªæµ‹è¯•åˆå§‹åŒ–æ—¶é—´, ç„¶åè°ƒç”¨æ–¹æ³•ä¸€æ¬¡. æ³¨æ„è¿™ä¸ªæµ‹è¯•ä¸­æ•°å­—å¹¶ä¸é‡è¦, å› ä¸ºå•ä¸ªå®ä¾‹åŒ–è¿‡ç¨‹åœ¨åº”ç”¨ç¨‹åºä¸­æ— å…³å¤§ç¢, æˆ‘ä»¬è®¨è®ºçš„æ˜¯æ¯ç§’èƒ½æ‰§è¡Œå¤šå°‘æ¬¡æ“ä½œå¹¶ä¸”é¢‘ç‡è¶³å¤Ÿé«˜. æˆ‘æ¯”è¾ƒæ‹…å¿ƒæ–¹æ³•ä¹‹é—´çš„å·®å¼‚. For the second one, I used a representative use case. The instantiation of 100 components â€” like a list â€” which after we called the method one time on each. ç¬¬äºŒä¸ªæµ‹è¯•, ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ä½¿ç”¨ç¤ºä¾‹. åˆå§‹åŒ–100ä¸ªç»„ä»¶å½¢æˆä¸€ä¸ªç»„ä»¶åˆ—è¡¨, å¯¹æ¯ä¸ªç»„ä»¶è°ƒç”¨ä¸€æ¬¡æ–¹æ³•. All benchmarks were run on a MacBook Pro 13â€ 2016 2GHz on Mac OS X 10.13.1 and Chrome 62.0.3202. æ€»çš„æ¥è¯´, ä¸ºäº†æ›´å¥½çš„ä»£ç æ‰§è¡Œæ€§èƒ½, æˆ‘ä»¬éœ€è¦åœ¨åŸå‹ä¸Šå£°æ˜æ–¹æ³•ç„¶ååœ¨éœ€è¦æ—¶bindåˆ°å®ä¾‹ä¸Š(å½“ä½œå±æ€§æˆ–è€…å›è°ƒå‡½æ•°ä¼ é€’). åœ¨åŸå‹ä¸Šå£°æ˜æ–¹æ³•å¹¶åœ¨æ„é€ æ–¹æ³•ä¸­å£°æ˜å¹¶ç»‘å®šè‡ªå·±çš„å±æ€§æ˜¯æœ‰æ„ä¹‰çš„, è€Œä¸”æ–¹æ³•å¹¶ä¸æ˜¯ç‰¹åˆ«å¤š.æˆ‘ä»¬è®¨è®ºçš„æ˜¯é«˜é¢‘æ“ä½œ, ä½†æ˜¯æˆ‘ä»¬æ¸…æ¥šçœ‹åˆ°ç®­å¤´å‡½æ•°åœ¨ç±»å£°æ˜ä¸­æ€§èƒ½è¡¨ç°å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸå¾…çš„æƒ…å†µ.æœ‰äººä¼šè¯´è¿™ç‚¹å„¿æ€§èƒ½æŸå¤±å¹¶æ— å¤§ç¢, æˆ‘ä»¬ç»å¤§å¤šæ•°æƒ…å†µå¹¶ä¸ä¼šå¯¹ä¸€ä¸ªç»„ä»¶å£°æ˜å¾ˆå¤šå®ä¾‹, çš„ç¡®è¿™æ ·.ä½ ä¹Ÿå¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæå‰ä¼˜åŒ–(æå‰ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº), ä½†æ˜¯, æˆ‘ä»¬èƒ½æŠŠç®­å¤´å‡½æ•°åœ¨ç±»å±æ€§ä¸­çš„ä½¿ç”¨å½“ä½œç®€åŒ–ä½¿ç”¨è¿˜æ˜¯ä¸å½“ä½¿ç”¨å‘¢? å¸Œæœ›JSå¼•æ“å°†æ¥ä¼šä¼˜åŒ–ç±»å±æ€§ä¸­çš„ç®­å¤´å‡½æ•°. P.S: Class properties for properties are such a great improvement! æˆ‘åœ¨å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œè½¯ä»¶åŒ…ä¸­éƒ½è§åˆ°è¿‡è¿™ç±»ä½¿ç”¨æ–¹å¼, å¾ˆå¤šå¯ä»¥å¤šå®ä¾‹æ–¹å¼ä½¿ç”¨çš„ç»„ä»¶ä¹Ÿæ˜¯. æ—¢ç„¶å·²ç»çŸ¥é“è¿™ç§æ–¹å¼ç°åœ¨ä¼šå½±å“ç¨‹åºæ€§èƒ½, æˆ‘ä»¬çœŸçš„åº”è¯¥ç»§ç»­ä½¿ç”¨å—? æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªç‰ºç‰²æ€§èƒ½, è€Œä¸”å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆå¥½ç”¨çš„åšæ³•. è§£å†³æ–¹æ¡ˆæ˜¯ autobind-decorator, ä¸å¹¸çš„æ˜¯å½“å‰åªèƒ½å€ŸåŠ©babel ä½¿ç”¨, å®ƒè¿˜åªæ˜¯ä¸€ä¸ªstage 2çš„ææ¡ˆ.12345678910class Component &#123; constructor(value) &#123; this.value = value; &#125; @autobind method() &#123; return this.value; &#125;&#125; å°½ç®¡å¦‚æ­¤, ä»–ä»¬ä¹Ÿå»ºè®®æœ€å¥½ä¸è¦æ»¥ç”¨ autobind: It is unnecessary to do that to every function. This is just as bad as autobinding (on a class). You only need to bind functions that you pass around. e.g. onClick={this.doSomething}. Or fetch.then(this.hanldeDone) â€” Dan Abramov. â€I was the guy who came up with autobinding in older Reacts and Iâ€™m glad to see it gone. It might save you a few keystrokes but it allocates functions thatâ€™ll never be called in 90% of cases and has noticeable performance degradation. Getting rid of autobinding is a good thing â€” Peter Hunt Conclusionä½¿ç”¨ç®­å¤´å‡½æ•°å£°æ˜çš„ç±»æˆå‘˜ä¼šè¢«ç¼–è¯‘åˆ°æ„é€ å‡½æ•°ä¸­å®šä¹‰åˆ°å½“å‰å¯¹è±¡ä¸Šé¢è€Œä¸æ˜¯åœ¨å½“å‰ç±»çš„åŸå‹ä¸Š. æˆ‘ä»¬æ— æ³•ä½¿ç”¨superè°ƒç”¨è¿™äº›æ–¹æ³•. ç®­å¤´å‡½æ•°å£°æ˜ç±»å±æ€§æ¯”ç»‘å®šæ–¹æ³•æ…¢å¾ˆå¤š, å®ƒä»¬éƒ½æ¯”æ­£å¸¸æ–¹æ³•è¦æ…¢. æˆ‘ä»¬åªéœ€è¦.bind()å¯èƒ½ä¼šè¢«ä¼ é€’çš„æ–¹æ³•. çŸ¥é“ç®­å¤´å‡½æ•°å£°æ˜çš„ç±»å±æ€§æ˜¯å¦‚ä½•å·¥ä½œä»¥åŠçœŸå®çš„æ€§èƒ½è¡¨ç°ä¹‹å, ä½ åº”è¯¥å¯ä»¥åšå‡ºèªæ˜çš„é€‰æ‹©å¹¶æ¸…æ¥šè¿™äº›é€‰æ‹©çš„ç»“æœ.ä½ è§‰å¾—å‘¢? ä½ ä¼šç»§ç»­è¿™ä¹ˆä½¿ç”¨å—? è¿™ç¯‡æ–‡ç« ä¼šä¸ä¼šè®©ä½ æ”¹å˜æƒ³æ³•?æ¬¢è¿äº¤æµæƒ³æ³•.","categories":[{"name":"Translate","slug":"Translate","permalink":"https://mrzzcn.github.io/categories/Translate/"},{"name":"Technology","slug":"Translate/Technology","permalink":"https://mrzzcn.github.io/categories/Translate/Technology/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://mrzzcn.github.io/tags/éšç¬”/"},{"name":"React","slug":"React","permalink":"https://mrzzcn.github.io/tags/React/"},{"name":"Javascript","slug":"Javascript","permalink":"https://mrzzcn.github.io/tags/Javascript/"},{"name":"ES6","slug":"ES6","permalink":"https://mrzzcn.github.io/tags/ES6/"},{"name":"Class","slug":"Class","permalink":"https://mrzzcn.github.io/tags/Class/"},{"name":"Arrow functions","slug":"Arrow-functions","permalink":"https://mrzzcn.github.io/tags/Arrow-functions/"}]},{"title":"core-js ES6 ES7 cheatsheet","slug":"core-js-es","date":"2018-04-27","updated":"2019-04-27","comments":true,"path":"2018/04/27/core-js-es/","link":"","permalink":"https://mrzzcn.github.io/2018/04/27/core-js-es/","excerpt":"ECMAScript 5 (ES5)ï¼šECMAScript çš„ç¬¬äº”ç‰ˆä¿®è®¢ï¼Œäº 2009 å¹´å®Œæˆæ ‡å‡†åŒ–ã€‚è¿™ä¸ªè§„èŒƒåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­éƒ½ç›¸å½“å®Œå…¨çš„å®ç°äº†ã€‚ ECMAScript 6 (ES2015/ES6) / ECMAScript 2015 (ES2015)ï¼šECMAScript çš„ç¬¬å…­ç‰ˆä¿®è®¢ï¼Œäº 2015 å¹´å®Œæˆæ ‡å‡†åŒ–ã€‚è¿™ä¸ªæ ‡å‡†è¢«éƒ¨åˆ†å®ç°äºå¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨ã€‚å¯ä»¥æŸ¥é˜…è¿™å¼ å…¼å®¹æ€§è¡¨æ¥æŸ¥çœ‹ä¸åŒæµè§ˆå™¨å’Œå·¥å…·çš„å®ç°æƒ…å†µã€‚ ECMAScript 2016 (ES2016/ES7)ï¼šç¬¬ä¸ƒç‰ˆ ECMAScript ä¿®è®¢. ECMAScript 2017 (ES2017) å¯¹å¸¸ç”¨çš„APIä½œä¸ªç®€å•è¯´æ˜(æŒ‰éœ€å¼•å…¥polyfill), ç‚¹æ­¤æŸ¥çœ‹Githubé“¾æ¥åŸæ–‡","text":"ECMAScript 5 (ES5)ï¼šECMAScript çš„ç¬¬äº”ç‰ˆä¿®è®¢ï¼Œäº 2009 å¹´å®Œæˆæ ‡å‡†åŒ–ã€‚è¿™ä¸ªè§„èŒƒåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­éƒ½ç›¸å½“å®Œå…¨çš„å®ç°äº†ã€‚ ECMAScript 6 (ES2015/ES6) / ECMAScript 2015 (ES2015)ï¼šECMAScript çš„ç¬¬å…­ç‰ˆä¿®è®¢ï¼Œäº 2015 å¹´å®Œæˆæ ‡å‡†åŒ–ã€‚è¿™ä¸ªæ ‡å‡†è¢«éƒ¨åˆ†å®ç°äºå¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨ã€‚å¯ä»¥æŸ¥é˜…è¿™å¼ å…¼å®¹æ€§è¡¨æ¥æŸ¥çœ‹ä¸åŒæµè§ˆå™¨å’Œå·¥å…·çš„å®ç°æƒ…å†µã€‚ ECMAScript 2016 (ES2016/ES7)ï¼šç¬¬ä¸ƒç‰ˆ ECMAScript ä¿®è®¢. ECMAScript 2017 (ES2017) å¯¹å¸¸ç”¨çš„APIä½œä¸ªç®€å•è¯´æ˜(æŒ‰éœ€å¼•å…¥polyfill), ç‚¹æ­¤æŸ¥çœ‹Githubé“¾æ¥åŸæ–‡ä¸‹æ–‡ä¸­. è¡¨ç¤ºç±»æ–¹æ³•/å±æ€§, # è¡¨ç¤ºå®ä¾‹æ–¹æ³•/å±æ€§ES5: All features moved to the es6 namespace, here just a list of features:1234567891011121314151617181920212223242526272829303132333435363738394041424344Object .create(proto | null, descriptors?) -&gt; object .getPrototypeOf(object) -&gt; proto | null .defineProperty(target, key, desc) -&gt; target, cap for ie8- .defineProperties(target, descriptors) -&gt; target, cap for ie8- .getOwnPropertyDescriptor(object, key) -&gt; desc .getOwnPropertyNames(object) -&gt; array .keys(object) -&gt; array .seal(object) -&gt; object, cap for ie8- .freeze(object) -&gt; object, cap for ie8- .preventExtensions(object) -&gt; object, cap for ie8- .isSealed(object) -&gt; bool, cap for ie8- .isFrozen(object) -&gt; bool, cap for ie8- .isExtensible(object) -&gt; bool, cap for ie8-Array .isArray(var) -&gt; bool #slice(start?, end?) -&gt; array, fix for ie7- #join(string = ',') -&gt; string, fix for ie7- #indexOf(var, from?) -&gt; int #lastIndexOf(var, from?) -&gt; int #every(fn(val, index, @), that) -&gt; bool #some(fn(val, index, @), that) -&gt; bool #forEach(fn(val, index, @), that) -&gt; void #map(fn(val, index, @), that) -&gt; array #filter(fn(val, index, @), that) -&gt; array #reduce(fn(memo, val, index, @), memo?) -&gt; var #reduceRight(fn(memo, val, index, @), memo?) -&gt; var #sort(fn?) -&gt; @, fixes for some enginesFunction #bind(object, ...args) -&gt; boundFn(...args)String #split(separator, limit) -&gt; array #trim() -&gt; strRegExp #toString() -&gt; strNumber #toFixed(digits) -&gt; string #toPrecision(precision) -&gt; stringparseInt(str, radix) -&gt; intparseFloat(str) -&gt; numDate .now() -&gt; int #toISOString() -&gt; string #toJSON() -&gt; string ES6: Object123456789101112131415161718Object .assign(target, ...src) -&gt; target .is(a, b) -&gt; bool .setPrototypeOf(target, proto | null) -&gt; target (required __proto__ - IE11+) .create(object | null, descriptors?) -&gt; object .getPrototypeOf(var) -&gt; object | null .defineProperty(object, key, desc) -&gt; target .defineProperties(object, descriptors) -&gt; target .getOwnPropertyDescriptor(var, key) -&gt; desc | undefined .keys(var) -&gt; array .getOwnPropertyNames(var) -&gt; array .freeze(var) -&gt; var .seal(var) -&gt; var .preventExtensions(var) -&gt; var .isFrozen(var) -&gt; bool .isSealed(var) -&gt; bool .isExtensible(var) -&gt; bool #toString() -&gt; string, ES6 fix: @@toStringTag support ES6: Function1234Function #bind(object, ...args) -&gt; boundFn(...args) #name -&gt; string (IE9+) #@@hasInstance(var) -&gt; bool ES6: Array123456789101112131415161718192021222324252627Array .from(iterable | array-like, mapFn(val, index)?, that) -&gt; array .of(...args) -&gt; array .isArray(var) -&gt; bool #copyWithin(target = 0, start = 0, end = @length) -&gt; @ #fill(val, start = 0, end = @length) -&gt; @ #find(fn(val, index, @), that) -&gt; val #findIndex(fn(val, index, @), that) -&gt; index | -1 #values() -&gt; iterator #keys() -&gt; iterator #entries() -&gt; iterator #join(string = ',') -&gt; string, fix for ie7- #slice(start?, end?) -&gt; array, fix for ie7- #indexOf(var, from?) -&gt; index | -1 #lastIndexOf(var, from?) -&gt; index | -1 #every(fn(val, index, @), that) -&gt; bool #some(fn(val, index, @), that) -&gt; bool #forEach(fn(val, index, @), that) -&gt; void #map(fn(val, index, @), that) -&gt; array #filter(fn(val, index, @), that) -&gt; array #reduce(fn(memo, val, index, @), memo?) -&gt; var #reduceRight(fn(memo, val, index, @), memo?) -&gt; var #sort(fn?) -&gt; @, invalid arguments fix #@@iterator() -&gt; iterator (values) #@@unscopables -&gt; object (cap)Arguments #@@iterator() -&gt; iterator (values, available only in core-js methods) ES6: String1234567891011121314151617181920212223String .fromCodePoint(...codePoints) -&gt; str .raw(&#123;raw&#125;, ...substitutions) -&gt; str #includes(str, from?) -&gt; bool #startsWith(str, from?) -&gt; bool #endsWith(str, from?) -&gt; bool #repeat(num) -&gt; str #codePointAt(pos) -&gt; uint #trim() -&gt; str, ES6 fix #anchor(name) -&gt; str #big() -&gt; str #blink() -&gt; str #bold() -&gt; str #fixed() -&gt; str #fontcolor(color) -&gt; str #fontsize(size) -&gt; str #italics() -&gt; str #link(url) -&gt; str #small() -&gt; str #strike() -&gt; str #sub() -&gt; str #sup() -&gt; str #@@iterator() -&gt; iterator (code points) ES6: RegExp123456789101112[new] RegExp(pattern, flags?) -&gt; regexp, ES6 fix: can alter flags (IE9+) #flags -&gt; str (IE9+) #toString() -&gt; str, ES6 fixes #@@match(str) -&gt; array | null #@@replace(str, replacer) -&gt; string #@@search(str) -&gt; index #@@split(str, limit) -&gt; arrayString #match(tpl) -&gt; var, ES6 fix for support @@match #replace(tpl, replacer) -&gt; var, ES6 fix for support @@replace #search(tpl) -&gt; var, ES6 fix for support @@search #split(tpl, limit) -&gt; var, ES6 fix for support @@split, some fixes for old engines ES6: Number1234567891011121314[new] Number(var) -&gt; number | number object .isFinite(num) -&gt; bool .isNaN(num) -&gt; bool .isInteger(num) -&gt; bool .isSafeInteger(num) -&gt; bool .parseFloat(str) -&gt; num .parseInt(str) -&gt; int .EPSILON -&gt; num .MAX_SAFE_INTEGER -&gt; int .MIN_SAFE_INTEGER -&gt; int #toFixed(digits) -&gt; string, fixes #toPrecision(precision) -&gt; string, fixesparseFloat(str) -&gt; num, fixesparseInt(str) -&gt; int, fixes ES6: Math123456789101112131415161718Math .acosh(num) -&gt; num .asinh(num) -&gt; num .atanh(num) -&gt; num .cbrt(num) -&gt; num .clz32(num) -&gt; uint .cosh(num) -&gt; num .expm1(num) -&gt; num .fround(num) -&gt; num .hypot(...args) -&gt; num .imul(num, num) -&gt; int .log1p(num) -&gt; num .log10(num) -&gt; num .log2(num) -&gt; num .sign(num) -&gt; 1 | -1 | 0 | -0 | NaN .sinh(num) -&gt; num .tanh(num) -&gt; num .trunc(num) -&gt; num ES6: Date123456Date .now() -&gt; int #toISOString() -&gt; string #toJSON() -&gt; string #toString() -&gt; string #@@toPrimitive(hint) -&gt; primitive ES6: Promise1234567new Promise(executor(resolve(var), reject(var))) -&gt; promise #then(resolved(var), rejected(var)) -&gt; promise #catch(rejected(var)) -&gt; promise .resolve(promise | var) -&gt; promise .reject(var) -&gt; promise .all(iterable) -&gt; promise .race(iterable) -&gt; promise ES6: Collections1234567891011121314151617181920212223242526272829303132333435new Map(iterable (entries) ?) -&gt; map #clear() -&gt; void #delete(key) -&gt; bool #forEach(fn(val, key, @), that) -&gt; void #get(key) -&gt; val #has(key) -&gt; bool #set(key, val) -&gt; @ #size -&gt; uint #values() -&gt; iterator #keys() -&gt; iterator #entries() -&gt; iterator #@@iterator() -&gt; iterator (entries) new Set(iterable?) -&gt; set #add(key) -&gt; @ #clear() -&gt; void #delete(key) -&gt; bool #forEach(fn(el, el, @), that) -&gt; void #has(key) -&gt; bool #size -&gt; uint #values() -&gt; iterator #keys() -&gt; iterator #entries() -&gt; iterator #@@iterator() -&gt; iterator (values) new WeakMap(iterable (entries) ?) -&gt; weakmap #delete(key) -&gt; bool #get(key) -&gt; val #has(key) -&gt; bool #set(key, val) -&gt; @new WeakSet(iterable?) -&gt; weakset #add(key) -&gt; @ #delete(key) -&gt; bool #has(key) -&gt; bool ES6: Symbol123456789101112131415161718Symbol(description?) -&gt; symbol .hasInstance -&gt; @@hasInstance .isConcatSpreadable -&gt; @@isConcatSpreadable .iterator -&gt; @@iterator .match -&gt; @@match .replace -&gt; @@replace .search -&gt; @@search .species -&gt; @@species .split -&gt; @@split .toPrimitive -&gt; @@toPrimitive .toStringTag -&gt; @@toStringTag .unscopables -&gt; @@unscopables .for(key) -&gt; symbol .keyFor(symbol) -&gt; key .useSimple() -&gt; void .useSetter() -&gt; voidObject .getOwnPropertySymbols(object) -&gt; array ES6: Typed Arrays123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475new ArrayBuffer(length) -&gt; buffer .isView(var) -&gt; bool #slice(start = 0, end = @length) -&gt; buffer #byteLength -&gt; uintnew DataView(buffer, byteOffset = 0, byteLength = buffer.byteLength - byteOffset) -&gt; view #getInt8(offset) -&gt; int8 #getUint8(offset) -&gt; uint8 #getInt16(offset, littleEndian = false) -&gt; int16 #getUint16(offset, littleEndian = false) -&gt; uint16 #getInt32(offset, littleEndian = false) -&gt; int32 #getUint32(offset, littleEndian = false) -&gt; uint32 #getFloat32(offset, littleEndian = false) -&gt; float32 #getFloat64(offset, littleEndian = false) -&gt; float64 #setInt8(offset, value) -&gt; void #setUint8(offset, value) -&gt; void #setInt16(offset, value, littleEndian = false) -&gt; void #setUint16(offset, value, littleEndian = false) -&gt; void #setInt32(offset, value, littleEndian = false) -&gt; void #setUint32(offset, value, littleEndian = false) -&gt; void #setFloat32(offset, value, littleEndian = false) -&gt; void #setFloat64(offset, value, littleEndian = false) -&gt; void #buffer -&gt; buffer #byteLength -&gt; uint #byteOffset -&gt; uint&#123; Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array&#125; new %TypedArray%(length) -&gt; typed new %TypedArray%(typed) -&gt; typed new %TypedArray%(arrayLike) -&gt; typed new %TypedArray%(iterable) -&gt; typed new %TypedArray%(buffer, byteOffset = 0, length = (buffer.byteLength - byteOffset) / @BYTES_PER_ELEMENT) -&gt; typed .BYTES_PER_ELEMENT -&gt; uint .from(arrayLike | iterable, mapFn(val, index)?, that) -&gt; typed .of(...args) -&gt; typed #BYTES_PER_ELEMENT -&gt; uint #copyWithin(target = 0, start = 0, end = @length) -&gt; @ #every(fn(val, index, @), that) -&gt; bool #fill(val, start = 0, end = @length) -&gt; @ #filter(fn(val, index, @), that) -&gt; typed #find(fn(val, index, @), that) -&gt; val #findIndex(fn(val, index, @), that) -&gt; index #forEach(fn(val, index, @), that) -&gt; void #indexOf(var, from?) -&gt; int #join(string = ',') -&gt; string #lastIndexOf(var, from?) -&gt; int #map(fn(val, index, @), that) -&gt; typed #reduce(fn(memo, val, index, @), memo?) -&gt; var #reduceRight(fn(memo, val, index, @), memo?) -&gt; var #reverse() -&gt; @ #set(arrayLike, offset = 0) -&gt; void #slice(start = 0, end = @length) -&gt; typed #some(fn(val, index, @), that) -&gt; bool #sort(fn(a, b)?) -&gt; @ #subarray(start = 0, end = @length) -&gt; typed #toString() -&gt; string #toLocaleString() -&gt; string #values() -&gt; iterator #keys() -&gt; iterator #entries() -&gt; iterator #@@iterator() -&gt; iterator (values) #buffer -&gt; buffer #byteLength -&gt; uint #byteOffset -&gt; uint #length -&gt; uint ES6: Reflect123456789101112131415Reflect .apply(target, thisArgument, argumentsList) -&gt; var .construct(target, argumentsList, newTarget?) -&gt; object .defineProperty(target, propertyKey, attributes) -&gt; bool .deleteProperty(target, propertyKey) -&gt; bool .enumerate(target) -&gt; iterator (removed from the spec and will be removed from core-js@3) .get(target, propertyKey, receiver?) -&gt; var .getOwnPropertyDescriptor(target, propertyKey) -&gt; desc .getPrototypeOf(target) -&gt; object | null .has(target, propertyKey) -&gt; bool .isExtensible(target) -&gt; bool .ownKeys(target) -&gt; array .preventExtensions(target) -&gt; bool .set(target, propertyKey, V, receiver?) -&gt; bool .setPrototypeOf(target, proto) -&gt; bool (required __proto__ - IE11+) ES7: Stage 4 proposals1234567891011121314151617181920212223242526272829Array #includes(var, from?) -&gt; bool&#123; Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array&#125; #includes(var, from?) -&gt; bool Object .values(object) -&gt; array .entries(object) -&gt; array .getOwnPropertyDescriptors(object) -&gt; object String #padStart(length, fillStr = ' ') -&gt; string #padEnd(length, fillStr = ' ') -&gt; string Object #__defineSetter__(key, fn) -&gt; void #__defineGetter__(key, fn) -&gt; void #__lookupSetter__(key) -&gt; fn | void #__lookupGetter__(key) -&gt; fn | void ES7: Stage 3 proposals1234567891011global -&gt; objectSystem .global -&gt; object (obsolete)global.Array === Array; // =&gt; truePromise #finally(onFinally()) -&gt; promise Symbol .asyncIterator -&gt; @@asyncIterator ES7: Stage 2 proposals12345String #trimLeft() -&gt; string #trimRight() -&gt; string #trimStart() -&gt; string #trimEnd() -&gt; string ES7: Stage 1 proposals1234567891011121314151617181920212223242526272829303132333435363738394041424344Promise .try(function()) -&gt; promiseArray #flatten(depthArg = 1) -&gt; array #flatMap(fn(val, key, @), that) -&gt; arraySet .of(...args) -&gt; set .from(iterable, mapFn(val, index)?, that?) -&gt; setMap .of(...args) -&gt; map .from(iterable, mapFn(val, index)?, that?) -&gt; mapWeakSet .of(...args) -&gt; weakset .from(iterable, mapFn(val, index)?, that?) -&gt; weaksetWeakMap .of(...args) -&gt; weakmap .from(iterable, mapFn(val, index)?, that?) -&gt; weakmap String #matchAll(regexp) -&gt; iterator new Observable(fn) -&gt; observable #subscribe(observer) -&gt; subscription #forEach(fn) -&gt; promise #@@observable() -&gt; @ .of(...items) -&gt; observable .from(observable | iterable) -&gt; observable .@@species -&gt; @Symbol .observable -&gt; @@observable Math .DEG_PER_RAD -&gt; number .RAD_PER_DEG -&gt; number .clamp(x, lower, upper) -&gt; number .degrees(radians) -&gt; number .fscale(x, inLow, inHigh, outLow, outHigh) -&gt; number .radians(degrees) -&gt; number .scale(x, inLow, inHigh, outLow, outHigh) -&gt; number Math .signbit(x) -&gt; bool â€¦ES7: Stage 0 proposals and below","categories":[{"name":"Technology","slug":"Technology","permalink":"https://mrzzcn.github.io/categories/Technology/"},{"name":"Javascript","slug":"Technology/Javascript","permalink":"https://mrzzcn.github.io/categories/Technology/Javascript/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://mrzzcn.github.io/tags/Javascript/"},{"name":"core-js","slug":"core-js","permalink":"https://mrzzcn.github.io/tags/core-js/"},{"name":"babel","slug":"babel","permalink":"https://mrzzcn.github.io/tags/babel/"},{"name":"es6","slug":"es6","permalink":"https://mrzzcn.github.io/tags/es6/"},{"name":"es7","slug":"es7","permalink":"https://mrzzcn.github.io/tags/es7/"}]},{"title":"Git å·¥ä½œæµ","slug":"git-flow","date":"2015-11-17","updated":"2019-04-27","comments":true,"path":"2015/11/17/git-flow/","link":"","permalink":"https://mrzzcn.github.io/2015/11/17/git-flow/","excerpt":"ç®€å•æ•´ç†ä¸€ä¸‹å¤šäººåŒä¸€è¿œç¨‹ä»“åº“gitå·¥ä½œæµæ¨¡å¼ã€‚ 1. åˆå§‹åŒ–æœ¬åœ°ä»“åº“12345// å·²æœ‰é¡¹ç›®git clone git@github.com:mrzzcn/mrzzcn.github.io.git// æ–°å»ºé¡¹ç›®git init","text":"ç®€å•æ•´ç†ä¸€ä¸‹å¤šäººåŒä¸€è¿œç¨‹ä»“åº“gitå·¥ä½œæµæ¨¡å¼ã€‚ 1. åˆå§‹åŒ–æœ¬åœ°ä»“åº“12345// å·²æœ‰é¡¹ç›®git clone git@github.com:mrzzcn/mrzzcn.github.io.git// æ–°å»ºé¡¹ç›®git init 2. åˆ†æ”¯ä¸‰ä¸ªåŸºæœ¬åˆ†æ”¯ï¼šmaster: ç¨³å®šåˆ†æ”¯ï¼Œç”¨äºå‘å¸ƒå’Œä¿®æ”¹äº§å“bug;test: æµ‹è¯•åˆ†æ”¯ï¼Œç”¨äºå‘å¸ƒæµ‹è¯•æœåŠ¡å™¨å…±å†…éƒ¨æµ‹è¯•;dev: å¼€å‘åˆ†æ”¯ï¼Œç”¨äºå¼€å‘æ—¶æµ‹è¯•å’Œå‘å¸ƒï¼Œéšæ—¶åˆå¹¶æ–°åŠŸèƒ½ä»£ç æˆ–bugä¿®å¤; 3. å¼€å‘æµç¨‹1 æ¯ä¸ªæ–°åŠŸèƒ½åŸºäºdevåˆ†æ”¯ï¼Œåˆ›å»ºæ–°åˆ†æ”¯å¼€å§‹ï¼Œä¾‹å¦‚ç°åœ¨è¦å¢åŠ ä¸€ä¸ªç™»å½•åŠŸèƒ½ï¼š1234567// å½“å‰ä½äºdevåˆ†æ”¯git checkout -b feature-login// more codinggit add -Agit commit -m 'feature-login completed' 2 æ–°åŠŸèƒ½å®Œæˆï¼Œè‡ªå·±æµ‹è¯•ä¹‹åï¼Œéœ€è¦åˆå¹¶åˆ°devåˆ†æ”¯ï¼š12345678910// å½“å‰ä½äºdevåˆ†æ”¯git pull // é¦–å…ˆæ‹‰å–è¿œç¨‹åˆ†æ”¯// devåˆ†æ”¯ï¼ˆå†²çªè§£å†³å®Œæˆï¼‰cleanä¹‹ågit checkout feature-logingit rebase dev // ä¿ç•™devçš„å…¶ä»–äººçš„æäº¤è®°å½•å¹¶åˆå¹¶devåˆ†æ”¯åˆ°å½“å‰æ–°åŠŸèƒ½åˆ†æ”¯// dev åˆ†æ”¯åˆå¹¶ä¹‹åï¼ˆå¯èƒ½æœ‰å†²çªéœ€è¦è§£å†³ï¼‰git checkout devgit rebase feature-login è¿™æ—¶çš„åˆ†æ”¯çŠ¶æ€ï¼š3 æ¥ä¸‹æ¥ï¼Œå¯ä»¥åˆ é™¤feature-loginåˆ†æ”¯ï¼š12// å½“å‰ä½äºdevåˆ†æ”¯git branch -d feature-login 4 è¿™æ—¶ï¼Œfeature-login åŸºæœ¬å¼€å‘å®Œæˆï¼Œå¯ä»¥åˆå¹¶åˆ°teståˆ†æ”¯ï¼Œå‘å¸ƒç»™QAæµ‹è¯•12// å½“å‰ä½äº test åˆ†æ”¯git rebase dev 5 å¦‚æœQAæµ‹å‡ºbugéœ€è¦ä¿®æ”¹ï¼Œæˆ–è€…ä¸´æ—¶æœ‰éœ€æ±‚å˜åŠ¨ï¼Œéœ€è¦é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œä¸è¿‡å‘½åå¯ä»¥ä¿®æ”¹ï¼Œä¾‹å¦‚ fix-login-bug-1024ã€‚å¦‚æœæ˜¯ç»†èŠ‚è°ƒæ•´æˆ–è€…æ˜¯æ™“å¾—ä¿®æ”¹åˆ™å¯ä»¥åœ¨devåˆ†æ”¯ç›´æ¥æ‰§è¡Œã€‚6 æ‰€æœ‰åŠŸèƒ½æµ‹è¯•æ— è¯¯ä¹‹åï¼Œå¯ä»¥åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œå‘å¸ƒç”Ÿäº§ç¯å¢ƒ12345// å½“å‰ä½äº master åˆ†æ”¯git rebase dev // ä¹Ÿå¯èƒ½æ ¹æ®ä¸åŒåŠŸèƒ½çš„æµ‹è¯•çŠ¶æ€ï¼Œä¼šæ‰§è¡Œä¸åŒçš„åˆå¹¶æ“ä½œgit merge ... 4. çº¿ä¸Šbugä¸´æ—¶ä¿®æ”¹å¦‚æœç”Ÿäº§ç¯å¢ƒçªç„¶å‡ºç°bugéœ€è¦ä¿®æ”¹ï¼Œæˆ–è€…è¦æ”¹ä¸€äº›ç»†èŠ‚éƒ¨åˆ†ï¼Œåˆ™éœ€è¦ç›´æ¥åœ¨ master ä¸Šæ‰§è¡Œï¼Œç„¶ååˆå¹¶åˆ° devã€‚1234567891011121314151617181920// å½“å‰ä½äº master åˆ†æ”¯git checkout -b hotfix-bug1117// more codinggit add -Agit commit -m 'fixed hotfix-bug1117'git checkout mastergit rebase hotfix-bug1117// ç„¶åå‘å¸ƒ// æœ€åï¼Œéœ€è¦æŠŠä¿®æ”¹åˆå¹¶åˆ°devåˆ†æ”¯ï¼Œå‡å¦‚åˆšæ‰çš„æäº¤commitæ˜¯abcdefggit checkout devgit cherry-pick abcdefg// å¯èƒ½éœ€è¦è§£å†³å†²çª// æœ€å åˆ é™¤ `hotfix-bug1117` åˆ†æ”¯git branch -d hotfix-bug1117","categories":[{"name":"Technology","slug":"Technology","permalink":"https://mrzzcn.github.io/categories/Technology/"},{"name":"Git","slug":"Technology/Git","permalink":"https://mrzzcn.github.io/categories/Technology/Git/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://mrzzcn.github.io/tags/éšç¬”/"},{"name":"Git","slug":"Git","permalink":"https://mrzzcn.github.io/tags/Git/"}]},{"title":"JavaScript The Good Parts","slug":"JavaScript-The-Good-Parts","date":"2015-05-24","updated":"2019-04-27","comments":true,"path":"2015/05/24/JavaScript-The-Good-Parts/","link":"","permalink":"https://mrzzcn.github.io/2015/05/24/JavaScript-The-Good-Parts/","excerpt":"ä½¿ç”¨ä¸€ä¸ªmethod æ–¹æ³•å®šä¹‰æ–°æ–¹æ³•123456Function.prototype.method = function (name, func) &#123; if (!this.prototype[name]) &#123; this.prototype[name] = func; &#125; return this;&#125; æ ¹æ®æ•°å­—çš„æ­£è´Ÿæ¥åˆ¤æ–­æ˜¯ä½¿ç”¨Math.ceiling è¿˜æ˜¯Math.floor123Number.method(\"integer\", function () &#123; return Math[this &lt; 0 ? 'ceil' : 'floor'](this);&#125;);","text":"ä½¿ç”¨ä¸€ä¸ªmethod æ–¹æ³•å®šä¹‰æ–°æ–¹æ³•123456Function.prototype.method = function (name, func) &#123; if (!this.prototype[name]) &#123; this.prototype[name] = func; &#125; return this;&#125; æ ¹æ®æ•°å­—çš„æ­£è´Ÿæ¥åˆ¤æ–­æ˜¯ä½¿ç”¨Math.ceiling è¿˜æ˜¯Math.floor123Number.method(\"integer\", function () &#123; return Math[this &lt; 0 ? 'ceil' : 'floor'](this);&#125;); ç§»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºç™½123String.method(\"trim\", function () &#123; return this.replace(/^\\s+|\\s+$/g, '');&#125;) é—­åŒ…æ¼”ç¤º123456789101112var myObject = (function () &#123; var value = 0; return &#123; increment: function (inc) &#123; value += typeof inc === \"number\" ? inc : 1; &#125;, getValue: function () &#123; return value; &#125; &#125;;&#125;()); ç¼“å­˜ä¸­é—´è®¡ç®—ç»“æœ - æ–æ³¢çº³æŒˆæ•°ç»„12345678910111213141516171819202122232425262728// å®šä¹‰var memoizer = function (memo, formula) &#123; var recur = function (n) &#123; var result = memo[n]; if (typeof result !== 'number') &#123; result = formula(recur, n); memo[n] = result; &#125; return result; &#125;; return recur;&#125;;// ä½¿ç”¨var fibonacci = memoizer([0, 1], function (recur, n) &#123; return recur(n-1) + recur(n - 2);&#125;);for (var i = 0; i &lt;= 10; i++) &#123; console.log(\"%d : %d\", i, fibonacci(i));&#125;// æ‰©å±•ç”¨æ³• é˜¶ä¹˜var factorial = memoizer([1, 1], function (recur, n) &#123; return n * recur (n - 1)&#125;);for (var i = 1; i &lt;= 10; i++) &#123; console.log(\"%d : %d\", i, factorial(i));&#125; å¦‚ä½•å®ç°ç»§æ‰¿ - å‡½æ•°åŒ– åˆ›å»ºä¸€ä¸ªå¯¹è±¡ æœ‰é€‰æ‹©åœ°å®šä¹‰ç§æœ‰å®ä¾‹å˜é‡å’Œæ–¹æ³•ã€‚è¿™äº›å°±æ˜¯å‡½æ•°ä¸­é€šè¿‡varè¯­å¥å®šä¹‰çš„æ™®é€šå˜é‡ ç»™è¿™ä¸ªæ–°å¯¹è±¡æ‰©å……æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•æ‹¥æœ‰ç‰¹æƒå»è®¿é—®å‚æ•°ï¼Œä»¥åŠä¸Šä¸€æ­¥ä¸­å®šä¹‰çš„å˜é‡ã€‚ è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°åŒ–æ„é€ å™¨çš„ä¼ªä»£ç æ¨¡æ¿ï¼ˆåŠ ç²—çš„æ–‡æœ¬è¡¨ç¤ºå¼ºè°ƒï¼‰ï¼švar **constructor** = function (spec, my) &#123; // ä»£ç å¿«å†…éƒ¨ä¸çŸ¥é“æ€ä¹ˆåŠ ç²—ï¼Œå“ªä½å¤§ç¥æŒ‡ç‚¹ä¸€ä¸‹ var that, **å…¶ä»–ç§æœ‰å˜é‡**; my = my || &#123;&#125;; // **æŠŠå…±äº«çš„å˜é‡å’Œå‡½æ•°æ·»åŠ åˆ°myä¸­** that = &#123; name: \"**ä¸€ä¸ªæ–°å¯¹è±¡**\" &#125;; // **ç»™thatæ·»åŠ ç‰¹æƒæ–¹æ³•** return that;&#125;// spec å¯¹è±¡åŒ…å«æ„é€ å™¨éœ€è¦æ„é€ ä¸€ä¸ªæ–°å®ä¾‹çš„æ‰€å“Ÿä¿¡æ¯ã€‚spec çš„å†…å®¹å¯èƒ½ä¼šè¢«å¤åˆ¶åˆ°ç§æœ‰å˜é‡ä¸­ï¼Œæˆ–è€…è¢«å…¶ä»–å‡½æ•°æ”¹å˜ï¼Œæˆ–è€…æ–¹æ³•å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è®¿é—®specçš„ä¿¡æ¯ã€‚ï¼ˆä¸€ä¸ªç®€åŒ–çš„æ–¹å¼æ˜¯æ›¿æ¢specä¸ºä¸€ä¸ªå•ä¸€çš„å€¼ã€‚å½“æ„é€ å¯¹è±¡è¿‡ç¨‹ä¸­å¹¶ä¸éœ€è¦æ•´ä¸ªspecå¯¹è±¡çš„æ—¶å€™ï¼Œè¿™æ˜¯æœ‰ç”¨çš„ã€‚ï¼‰// my å¯¹è±¡æ˜¯ä¸€ä¸ªä¸ºç»§æ‰¿é“¾ä¸­çš„æ„é€ å™¨æä¾›ç§˜å¯†å…±äº«çš„å®¹å™¨ã€‚myå¯¹è±¡å¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨ã€‚å¦‚æœæ²¡æœ‰ä¼ å…¥ä¸€ä¸ªmyå¯¹è±¡ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºä¸€ä¸ªmyå¯¹è±¡// demovar mammal = function (spec) &#123; var that = &#123;&#125;; that.get_name = function () &#123; return spec.name; &#125;; that.says = function () &#123; return spec.saying || \"\"; &#125; return that;&#125;;var cat = function (spec) &#123; spec.saying = spec.saying || 'meow'; var that = mammal(spec); that.purr = function (n) &#123; var i, s = ''; for (i = 0; i &lt; n; i += 1) &#123; if (s) &#123; s += \"-\"; &#125; s += \"r\"; &#125; return s; &#125;; that.get_name = function () &#123; return that.says() + \" \" + spec.name + \" \" + that.says(); &#125;; return that;&#125;;var myCat = cat(&#123;name: \"Henrietta\"&#125;); å‡½æ•°åŒ–æ¨¡å¼è¿˜æä¾›äº†ä¸€ä¸ªå¤„ç†çˆ¶ç±»æ–¹æ³•çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¼šæ„é€ ä¸€ä¸ªsuperioræ–¹æ³•ï¼Œå®ƒå–å¾—ä¸€ä¸ªæ–¹æ³•åå¹¶è¿”å›è°ƒç”¨é‚£ä¸ªæ–¹æ³•çš„å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè°ƒç”¨åŸæ¥çš„æ–¹æ³•ï¼Œå°½ç®¡å±æ€§å·²ç»å˜åŒ–äº†ã€‚1234567Object.method('superior', function (name) &#123; var that = this, method = that[name]; return function () &#123; return method.apply(that, arguments); &#125;;&#125;); è®©æˆ‘ä»¬åœ¨coolcatä¸Šè¯•éªŒä¸€ä¸‹ï¼Œcoolcatå°±åƒcatä¸€æ ·ï¼Œé™¤äº†å®ƒæœ‰ä¸€ä¸ªæ›´é…·çš„è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„get_nameæ–¹æ³•ã€‚å®ƒåªéœ€è¦ä¸€ç‚¹ç‚¹çš„å‡†å¤‡å·¥ä½œã€‚æˆ‘ä»¬ä¼šå£°æ˜ä¸€ä¸ªsuper_get_nameå˜é‡ï¼Œå¹¶ä¸”æŠŠè°ƒç”¨superioræ–¹æ³•æ‰€è¿”å›çš„ç»“æœèµ‹å€¼ç»™å®ƒã€‚123456789101112var coolcat = function (spec) &#123; var that = cat(spec), super_get_name = that.superior('get_name'); that.get_name = function (n) &#123; return 'like ' + super_get_name() + ' baby'; &#125;; return that;&#125;;var myCoolCat = coolcat(&#123;name: 'Bix'&#125;);var name = myCoolCat.get_name();console.log(name); // \"like meow Bix meow baby\" éƒ¨ä»¶æˆ‘ä»¬å¯ä»¥ä»ä¸€å¥—éƒ¨ä»¶ä¸­æŠŠå¯¹è±¡ç»„è£…å‡ºæ¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªç»™ä»»ä½•å¯¹è±¡æ·»åŠ ç®€å•äº‹ä»¶å¤„ç†ç‰¹æ€§çš„å‡½æ•°ã€‚ä»–ä¼šç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªonæ–¹æ³•ã€ä¸€ä¸ªfireæ–¹æ³•å’Œä¸€ä¸ªç§æœ‰çš„äº‹ä»¶æ³¨å†Œè¡¨å¯¹è±¡ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445var eventuality = function (that) &#123; var registry = &#123;&#125;; that.fire = function (event) &#123; // åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚è¯¥äº‹ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«äº‹ä»¶åç§°çš„å­—ç¬¦ä¸² // æˆ–è€…æ˜¯ä¸€ä¸ªæ‹¥æœ‰åŒ…å«äº‹ä»¶åç§°çš„ type å±æ€§çš„å¯¹è±¡ã€‚ // é€šè¿‡'on'æ–¹æ³•æ³¨å†Œçš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­åŒ¹é…äº‹ä»¶åç§°çš„å‡½æ•°å°†è¢«è°ƒç”¨ã€‚ var array, func, handler, i, type = typeof event === 'string' ? event : event.type; if (registry.hasOwnProperty(type)) &#123; array = registry[type]; for (i = 0; i &lt; array.length; i += 1) &#123; handler = array[i]; // æ¯ä¸ªå¤„ç†ç¨‹åºåŒ…å«ä¸€ä¸ªæ–¹æ³•å’Œä¸€ç»„å¯é€‰çš„å‚æ•°ã€‚ // å¦‚æœè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„åå­—ï¼Œé‚£ä¹ˆå¯»æ‰¾åˆ°è¯¥å‡½æ•°ã€‚ func = handler.method; if (typeof func === 'string') &#123; func = this[func]; &#125; // è°ƒç”¨ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚å¦‚æœè¯¥æ¡ç›®åŒ…å«å‚æ•°ï¼Œé‚£ä¹ˆä¼ é€’å®ƒä»¬è¿‡å»ã€‚å¦åˆ™ï¼Œä¼ é€’è¯¥äº‹ä»¶å¯¹è±¡ã€‚ func.apply(this, handler.parameters || [event]); &#125; &#125; return this; &#125;; that.on = function (type, method, parameters) &#123; // æ³¨å†Œä¸€ä¸ªäº‹ä»¶ã€‚æ„é€ ä¸€æ¡å¤„ç†ç¨‹åºæ¡ç›®ã€‚å°†å®ƒæ’å…¥åˆ°å¤„ç†ç¨‹åºæ•°ç»„ä¸­ï¼Œ // å¦‚æœè¿™ç§ç±»å‹çš„äº‹ä»¶è¿˜ä¸å­˜åœ¨ï¼Œå°±æ„é€ ä¸€ä¸ªã€‚ var handler = &#123; method: method, parameters: parameters &#125;; if (registry.hasOwnProperty(type)) &#123; registry[type].push(handler); &#125; else &#123; registry[type] = [handler]; &#125; return this; &#125;; return that;&#125;; æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•å•ç‹¬çš„å¯¹è±¡ä¸Šè°ƒç”¨eventuality, æˆäºˆå®ƒäº‹ä»¶å¤„ç†æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥èµ¶åœ¨thatè¢«è¿”å›ä¹‹å‰åœ¨ä¸€ä¸ªæ„é€ å™¨å‡½æ•°ä¸­è°ƒç”¨å®ƒ eventuality(that);1234567891011121314151617181920212223eventuality(myCoolCat);myCoolCat.health = 100;myCoolCat.on('dead', function (event) &#123; var date = event.date; var killer = event.killer; console.log(\"%s killed me at %s\", killer, date);&#125;);myCoolCat.on('hurt', function () &#123; this.health -= 50; if (this.health &lt;= 0) &#123; var event = &#123; type: 'dead', killer: 'stone from sky', date: new Date() &#125;; this.fire(event); &#125; else &#123; console.log('nothing, who is the strong guy.'); &#125;&#125;);myCoolCat.fire(\"hurt\"); //nothing, who is the strong guy.myCoolCat.fire(\"hurt\"); //stone from sky killed me at Sat Mar 14 2015 15:47:29 GMT+0800 (CST) æ•°ç»„ä¸å¯¹è±¡javascript ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯åœ¨å¿…é¡»ä½¿ç”¨æ•°ç»„æ—¶ä½¿ç”¨äº†å¯¹è±¡ï¼Œæˆ–è€…åœ¨å¿…é¡»ä½¿ç”¨å¯¹è±¡æ—¶ä½¿ç”¨äº†æ•°ç»„ã€‚å…¶å®è§„åˆ™å¾ˆç®€å•ï¼šå½“å±æ€§åæ˜¯å°è€Œè¿ç»­çš„æ•´æ•°æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨æ•°ç»„ã€‚å¦åˆ™ï¼Œä½¿ç”¨å¯¹è±¡ã€‚javascript æœ¬èº«æ²¡æœ‰ä¸€ä¸ªå¥½çš„æœºåˆ¶æ¥åŒºåˆ†æ•°ç»„å’Œå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰è‡ªå·±çš„is_arrayå‡½æ•°æ¥å¼¥è¡¥è¿™ä¸ªç¼ºé™·ï¼š12345678910var is_array = function (value) &#123; return value &amp;&amp; typeof value === 'object' &amp;&amp; value.constructor === Array;&#125;;// ä¸è¿‡è¯¥æ–¹æ³•åœ¨è¯†åˆ«ä»ä¸åŒçš„çª—å£(window)æˆ–è€…frameé‡Œæ„é€ çš„æ•°ç»„æ—¶ä¼šå¤±è´¥ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ–¹å¼// ä¸Šé¢è¿™å¥è¯è¿™é‡Œæœ¬äººå°šæœªç†è§£ï¼Œè¯·é«˜æ‰‹æŒ‡ç‚¹var is_array = function (value) &#123; return Object.prototype.toString.apply(value) === '[object Array]';&#125;; ä¸ºæ•°ç»„æ‰©å……reduceå‡½æ•°1234567891011121314151617181920212223242526Array.method('reduce', function (f, value) &#123; var i; for (i = 0; i &lt; this.length; i += 1) &#123; value = f(this[i], value); &#125; return value;&#125;);// DEMOvar data = [4, 8, 15, 16, 23, 42];var add = function (a, b) &#123; return a + b;&#125;;var mult = function (a, b) &#123; return a * b;&#125;;var sum = data.reduce(add, 0);console.log(sum);// 108var product = data.reduce(mult, 1);console.log(product); // 7418880// å› ä¸ºæ•°ç»„å…¶å®å°±æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ç»™ä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ·»åŠ æ–¹æ³•data.total = function () &#123; return this.reduce(add, 0);&#125;;var total = data.total();console.log(total); // 108 ä¸ºæ•°ç»„æŒ‡å®šåˆå§‹å€¼123456789Array.dim = function (dimension, initial) &#123; var a = [], i; for (i = 0; i &lt; dimension; i += 1) &#123; a[i] = initial; &#125; return a;&#125;;var myArray = Array.dim(10, 0); //[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]// æ³¨æ„è¿™é‡Œä¸èƒ½ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è¯´çš„methodæ–¹æ³•ï¼Œåº”ä¸ºé‚£ä¸ªæ–¹æ³•æ˜¯ç»™æŸä¸ªç±»å‹çš„æ¯ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡å¢åŠ æ–¹æ³•çš„ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬æ˜¯ç»™Arrayè¿™ä¸ª ç±»å‹ å¢åŠ æ–¹æ³•ï¼Œç±»ä¼¼äºæŸäº›é™æ€è¯­è¨€ä¸­çš„é™æ€æ–¹æ³•æˆ–è€…ç±»æ–¹æ³• æ•°ç»„æ’åºsort æ–¹æ³•ä¼šarrayä¸­çš„å†…å®¹è¿›è¡Œæ’åºã€‚ä½†æ˜¯å®ƒä¸èƒ½æ­£ç¡®ç¬¬ç»™ä¸€ç»„æ•°å­—æ’åºï¼š12var myNumbers = [4, 8, 15, 16, 23, 42];myNumbers.sort(); // [15, 16, 23, 4, 42, 8] javascript çš„é»˜è®¤æ¯”è¾ƒå‡½æ•°æŠŠè¦è¢«æ’åºçš„å…ƒç´ éƒ½è§†ä¸ºå­—ç¬¦ä¸²ã€‚å®ƒå°šæœªè¶³å¤Ÿæ™ºèƒ½åˆ°åœ¨æ¯”è¾ƒè¿™äº›å…ƒç´ ä¹‹å‰å…ˆæ£€æµ‹ä»–ä»¬çš„ç±»å‹ï¼Œæ‰€ä»¥å½“å®ƒæ¯”è¾ƒè¿™äº›æ•°å­—çš„æ—¶å€™ï¼Œä¼šæŠŠå®ƒä»¬è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œäºæ˜¯å¾—åˆ°ä¸€ä¸ªé”™çš„ç¦»è°±çš„ç»“æœã€‚è¾›è¿çš„æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå·±çš„æ¯”è¾ƒå‡½æ•°æ¥æ›¿æ¢é»˜è®¤çš„æ¯”è¾ƒå‡½æ•°ã€‚ ä½ çš„æ¯”è¾ƒå‡½æ•°åº”è¯¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¦‚æœè¿™ä¸¤ä¸ªå‚æ•°ç›¸ç­‰åˆ™è¿”å›0ï¼Œå¦‚æœç¬¬1ä¸ªå‚æ•°åº”è¯¥æ’åˆ—åœ¨å‰é¢ï¼Œåˆ™è¿”å›ä¸€ä¸ªè´Ÿæ•°ï¼Œå¦‚æœç¬¬2ä¸ªå‚æ•°åº”è¯¥æ’åœ¨å‰é¢ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£æ•°ã€‚ 123myNumbers.sort(function (a, b) &#123; return a - b;&#125;); // [4, 8, 15, 16, 23, 42] ä¸Šé¢è¿™ä¸ªå‡½æ•°å¯ä»¥ä½¿æ•°å­—æ­£ç¡®æ’åºï¼Œä½†å®ƒä¸èƒ½ä½¿å­—ç¬¦ä¸²æ’åºã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ç»™ä»»ä½•åŒ…å«ç®€å•å€¼çš„æ•°ç»„æ’åºï¼Œå¿…é¡»è¦åšæ›´å¤šçš„å·¥ä½œï¼š12345678910var myStrings = ['aa', 'bb', 'a', 4, 8, 15, 16, 23, 42];myStrings.sort(function (a, b) &#123; if (a === b) &#123; return 0; &#125; if (typeof a === typeof b) &#123; return a &lt; b ? -1 : 1; &#125; return typeof a &lt; typeof b ? -1 : 1;&#125;); //[4, 8, 15, 16, 23, 42, \"a\", \"aa\", \"bb\"] å¯¹è±¡æ•°ç»„æ’åº12345678910111213141516171819202122232425262728293031323334353637383940414243// by å‡½æ•°æ¥å—ä¸€ä¸ªæˆå‘˜åå­—å­—ç¬¦ä¸²åšä¸ºå‚æ•°ï¼Œ// å¹¶è¿”å›ä¸€ä¸ªå¯ä»¥ç”¨æ¥å¯¹åŒ…å«è¯¥æˆå‘˜çš„å¯¹è±¡æ•°ç»„çš„è¿›è¡Œæ’åºçš„æ¯”è¾ƒå‡½æ•°var by = function (name) &#123; return function (o, p) &#123; var a, b; if (typeof o === 'object' &amp;&amp; typeof p === 'object' &amp;&amp; o &amp;&amp; p) &#123; a = o[name]; b = p[name]; if (a === b) &#123; return 0; &#125; if (typeof a === typeof b) &#123; return a &lt; b ? -1 : 1; &#125; return typeof a &lt; typeof b ? -1 : 1; &#125; else &#123; throw &#123; name: 'Error', message: 'Expected an object when sorting by ' + name &#125;; &#125; &#125;;&#125;var myPeople = [ &#123;first: 'Joe', last: 'Beasser'&#125;, &#123;first: 'Moe', last: 'Howard'&#125;, &#123;first: 'Joe', last: 'DeRita'&#125;, &#123;first: 'Shemp', last: 'Howard'&#125;, &#123;first: 'Larry', last: 'Fine'&#125;, &#123;first: 'Curly', last: 'Howard'&#125;];myPeople.sort(by('first'));/*[&#123;first: \"Curly\", last: \"Howard\"&#125;,&#123;first: \"Joe\", last: \"Beasser\"&#125;,&#123;first: \"Joe\", last: \"DeRita\"&#125;,&#123;first: \"Larry\", last: \"Fine\"&#125;,&#123;first: \"Moe\", last: \"Howard\"&#125;,&#123;tfirst: \"Shemp\", last: \"Howard\"&#125;]*/ sort æ–¹æ³•æ˜¯ä¸ç¨³å®šçš„ æ’åºçš„ç¨³å®šæ€§æ˜¯æŒ‡æ’åºåæ•°ç»„ä¸­çš„ç›¸ç­‰å€¼çš„ç›¸å¯¹ä½ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸ç¨³å®šæ€§æ’åºåˆ™ä¼šæ”¹å˜ç›¸ç­‰å€¼çš„ç›¸å¯¹ä½ç½®ã€‚è¯¦ç»†å†…å®¹å‚è§æ’åºç®—æ³•ã€‚JavaScriptçš„sortæ–¹æ³•çš„ç¨³å®šæ€§æ ¹æ®ä¸åŒæµè§ˆå™¨çš„å®ç°è€Œä¸ä¸€è‡´ã€‚å¯å‚è§Array.prototype.sortä¸­çš„ä»‹ç»ã€‚ ä¸‹é¢çš„è°ƒç”¨ï¼š12345678910myPeople.sort(by('last')).sort(by('first'));/*[&#123;\"first\": \"Curly\", \"last\": \"Howard\"&#125;,&#123;\"first\": \"Joe\", \"last\": \"Beasser\"&#125;,&#123;\"first\": \"Joe\", \"last\": \"DeRita\"&#125;,&#123;\"first\": \"Larry\", \"last\": \"Fine\"&#125;,&#123;\"first\": \"Moe\", \"last\": \"Howard\"&#125;,&#123;\"first\": \"Shemp\", \"last\": \"Howard\"&#125;]*/ ä¸èƒ½ä¿è¯äº§ç”Ÿæ­£ç¡®çš„åºåˆ—ã€‚å¦‚æœä½ æƒ³åŸºäºå¤šä¸ªé”®å€¼è¿›è¡Œæ’åºï¼Œä½ éœ€è¦å†æ¬¡åšæ›´å¤šçš„å·¥ä½œã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹byå‡½æ•°ï¼Œè®©å…¶å¯ä»¥æ¥å—ç¬¬2ä¸ªå‚æ•°ï¼Œå½“ä¸»è¦çš„é”®å€¼äº§ç”Ÿä¸€ä¸ªåŒ¹é…çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªcompareæ–¹æ³•å°†è¢«è°ƒç”¨ä»¥å†³å‡ºé«˜ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930313233// by å‡½æ•°æ¥å—ä¸€ä¸ªæˆå‘˜åå­—å­—ç¬¦ä¸²å’Œä¸€ä¸ªå¯é€‰çš„æ¬¡è¦æ¯”è¾ƒå‡½æ•°åšä¸ºå‚æ•°ï¼Œ// å¹¶è¿”å›ä¸€ä¸ªå¯ä»¥ç”¨æ¥å¯¹åŒ…å«è¯¥æˆå‘˜çš„å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºçš„æ¯”è¾ƒå‡½æ•°ã€‚// å½“ o[name] å’Œ p[name] ç›¸ç­‰æ—¶ï¼Œæ¬¡è¦æ¯”è¾ƒå‡½æ•°è¢«ç”¨æ¥å†³å‡ºé«˜ä¸‹ã€‚var by = function (name, minor) &#123; return function (o, p) &#123; var a, b; if (o &amp;&amp; p &amp;&amp; typeof o === 'object' &amp;&amp; typeof p === 'object') &#123; a = o[name]; b = p[name]; if (a === b) &#123; return typeof minor === 'function' ? minor(o, p) : 0; &#125; if (typeof a === typeof b) &#123; return a &lt; b ? -1 : 1; &#125; return typeof a &lt; typeof b ? -1 : 1; &#125; else &#123; throw &#123; name: 'Error', message: 'Expected an object when sorting by ' + name &#125;; &#125; &#125;;&#125;myPeople.sort(by('last', by('first')));[&#123;\"first\": \"Joe\", \"last\": \"Beasser\"&#125;,&#123;\"first\": \"Joe\", \"last\": \"DeRita\"&#125;,&#123;\"first\": \"Larry\", \"last\": \"Fine\"&#125;,&#123;\"first\": \"Curly\", \"last\": \"Howard\"&#125;,&#123;\"first\": \"Moe\", \"last\": \"Howard\"&#125;,&#123;\"first\": \"Shemp\", \"last\": \"Howard\"&#125;] æ­£åˆ™è¡¨è¾¾å¼ - è§£æURL12345678910111213141516171819var parse_url = /^(?:([A-Za-z]+):)?(\\/&#123;0,3&#125;)([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$/;var url = \"http://www.ora.com:80/goodparts?q#fragment\";var result = parse_url.exec(url);var names = ['url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash'];var blanks = ' ';var i;for (i = 0; i &lt; names.length; i += 1) &#123; console.log(\"%s:%s%s\", names[i], blanks.substring(names[i].length), result[i]);&#125;/* url: http://www.ora.com:80/goodparts?q#fragment scheme:http slash: // host: www.ora.com port: 80 path: goodparts query: q hash: fragment*/ æ­£åˆ™è¡¨è¾¾å¼ - éªŒè¯æ•°å­—12345678910111213141516171819var parse_number = /^-?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d+)?$/i;var isNumber = function (value) &#123; var result = parse_number.test(value); console.log(\"%s %s a number\", value, result ? \"is\" : \"is not\");&#125;isNumber('1')// 1 is a numberisNumber('number')// number is not a numberisNumber('98.6')// 98.6 is a numberisNumber('132.21.86.100')// 132.21.86.100 is not a numberisNumber('123.45E-67')// 123.45E-67 is a numberisNumber('123.45D-67')//123.45D-67 is not a number// æ•°å­—å¯èƒ½ç”±ä¸€ä¸ªæ•´æ•°éƒ¨åˆ†åŠ ä¸Šä¸€ä¸ªå¯é€‰çš„è´Ÿå·ã€ä¸€ä¸ªå¯é€‰çš„å°æ•°éƒ¨åˆ†å’Œä¸€ä¸ªå¯é€‰çš„æŒ‡æ•°éƒ¨åˆ†æ„æˆ æ­£åˆ™è¡¨è¾¾å¼ä¸­32ä¸ªASCIIç‰¹æ®Šå­—ç¬¦é›†åˆï¼š1234567891011121314/*!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;\\&#125;~*/var ascii32 = /(?:!|\"|#|\\$|%|&amp;|'|\\(|\\)|\\*|\\+|,|-|\\/|:|;|&lt;|=|&gt;|\\?|@|\\[|\\\\|]|\\^|_|`|\\&#123;|\\||\\&#125;|~)/;// è¿™æ˜¯å…¶ä¸­ä¸€ç§ç®€å†™æ–¹å¼ï¼Œä¸è¿‡ä¾æ—§éš¾ä»¥é˜…è¯»var ascii32_short1 = /[!-\\/:-@\\[-`&#123;-~]/;// æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªæ–¹ä¾¿ä¹‹å¤„å°±æ˜¯ç±»çš„æ±‚åã€‚å¦‚æœ [ åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ ^ ,é‚£ä¹ˆè¿™ä¸ªç±»ä¼šæ’é™¤è¿™äº›ç‰¹æ®Šå­—ç¬¦ã€‚var not_ascii = /[^!-\\/:-@\\[-`&#123;-~]/; ç³Ÿç²•javascript æœ‰ä¸¤ç»„ç›¸ç­‰è¿ç®—ç¬¦ï¼š=== å’Œ !==, ä»¥åŠå®ƒä»¬é‚ªæ¶çš„å­ªç”Ÿå…„å¼Ÿ == å’Œ !=ã€‚=== å’Œ !== è¿™ä¸€ç»„è¿ç®—ç¬¦ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„æ–¹å¼å·¥ä½œã€‚å¦‚æœæ¥ä¸¤ä¸ªè¿ç®—æ•°ç±»å‹ä¸€è‡´å¹¶ä¸”æ‹¥æœ‰ç›¸åŒçš„å€¼ï¼Œé‚£ä¹ˆ === è¿”å› trueï¼Œ!== è¿”å› falseã€‚è€Œå®ƒä»¬é‚ªæ¶çš„å­ªç”Ÿå…„å¼Ÿåªæœ‰åœ¨ä¸¤ä¸ªè¿ç®—æ•°ç±»å‹ä¸€è‡´æ—¶æ‰ä¼šåšå‡ºæ­£ç¡®çš„åˆ¤æ–­ï¼Œå¦‚æœä¸¤ä¸ªè¿ç®—æ•°æ˜¯ä¸åŒçš„ç±»å‹ï¼Œå®ƒä»¬è¯•å›¾å»å¼ºåˆ¶è½¬æ¢å€¼çš„ç±»å‹ã€‚è½¬æ¢çš„è§„åˆ™å¤æ‚ä¸”éš¾ä»¥è®°å¿†ã€‚è¿™é‡Œæœ‰ä¸€äº›æœ‰è¶£çš„ä¾‹å­ï¼š 123456789101112'' == '0' // false0 == '' // true0 == '0' // truefalse == 'false' // falsefalse == '0' // truefalse == undefined // falsefalse == null // falsenull == undefined // true' \\t\\r\\n' == 0 // true == è¿ç®—ç¬¦å¯¹ä¼ é€’æ€§çš„ç¼ºä¹å€¼å¾—æˆ‘ä»¬è­¦æƒ•ã€‚æˆ‘çš„å»ºè®®æ˜¯æ°¸è¿œä¸è¦ä½¿ç”¨é‚£å¯¹é‚ªæ¶çš„å­ªç”Ÿå…„å¼Ÿã€‚ç›¸åï¼Œè¯·å§‹ç»ˆä½¿ç”¨ === å’Œ !==ã€‚å¦‚æœä»¥ä¸Šæ‰€æœ‰æ¯”è¾ƒä½¿ç”¨ === è¿ç®—ç¬¦ï¼Œç»“æœéƒ½æ˜¯falseã€‚ ä¼ é€’æ€§æ˜¯ä¸€ç§ç¼–ç¨‹çº¦å®šã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼šå¯¹äºä»»æ„çš„å¼•ç”¨å€¼xã€yå’Œzï¼Œå¦‚æœ x == y å’Œ y == z ä¸ºtrueï¼Œé‚£ä¹ˆx == zä¸ºtrueã€‚è€Œjavascriptä¸­çš„ == è¿ç®—ç¬¦åœ¨æŸäº›ç‰¹ä¾‹ä¸Šè¿èƒŒäº†ä¼ é€’æ€§ã€‚ æœ€å ä»¥ä¸€ä¸ªè‡ªå®šä¹‰çš„JSONè§£æå™¨ ç»“å°¾å§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246// è¿™æ˜¯ä¸€ä¸ªç”¨JavaScriptç¼–å†™JSONè§£æå™¨çš„å®ç°æ–¹æ¡ˆï¼švar json_parse = function () &#123; // è¿™æ˜¯ä¸€ä¸ªèƒ½æŠŠJSONæ–‡æœ¬è§£ææˆJavaScriptæ•°æ®ç»“æ„çš„å‡½æ•°ã€‚ // å®ƒæ˜¯ä¸€ä¸ªç®€å•çš„é€’å½’é™åºè§£æå™¨ã€‚ // æˆ‘ä»¬åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰æ­¤å‡½æ•°ï¼Œä»¥é¿å…åˆ›å»ºå…¨å±€å˜é‡ã€‚ var at, // å½“å‰å­—ç¬¦ç´¢å¼• ch, // å½“å‰å­—ç¬¦ escapee = &#123; '\"' : '\"', '\\\\' : '\\\\', '/' : '/', b : 'b', f : '\\f', n : '\\n', r : '\\r', t : '\\t' &#125;, text, error = function (m) &#123; // å½“æŸå¤„å‡ºé”™æ—¶ï¼Œè°ƒç”¨errorã€‚ throw &#123; name : 'SyntaxError', messsage: m, at : at, text : text &#125;; &#125;, next = function (c) &#123; // å¦‚æœæä¾›äº†å‚æ•° c, é‚£ä¹ˆæ£€æŸ¥å®ƒæ˜¯å¦åŒ¹é…å½“å‰å­—ç¬¦ã€‚ if (c &amp;&amp; c !== ch) &#123; error(\"Expected '\" + c + \"' insttead of '\" + ch + \"'\"); &#125; // è·å–ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚å½“æ²¡æœ‰ä¸‹ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œè¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚ ch = text.charAt(at); at += 1; return ch; &#125;, number = function () &#123; // è§£æä¸€ä¸ªæ•°å­—å€¼ã€‚ var number, string = ''; if (ch === '-') &#123; string = '-'; next('-'); &#125; while (ch &gt;= '0' &amp;&amp; ch &lt;= '9') &#123; string += ch; next(); &#125; if (ch === '.') &#123; string += \".\"; while (next() &amp;&amp; ch &gt;= '0' &amp;&amp; ch &lt;= '9') &#123; string += ch; &#125; &#125; if (ch == 'e' || ch == 'E') &#123; string += ch; next(); if (ch === '-' || ch === '+') &#123; string += ch; next(); &#125; while (ch &gt;= '0' &amp;&amp; ch &lt;= '9') &#123; string += ch; next(); &#125; &#125; number = +string; if (isNaN(number)) &#123; error(\"Bad number\"); &#125; else &#123; return number; &#125; &#125;, string = function () &#123; // è§£æä¸€ä¸ªå­—ç¬¦ä¸²å€¼ã€‚ var hex, i, string = '', uffff; // å½“è§£æå­—ç¬¦ä¸²å€¼æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ° \" å’Œ \\ å­—ç¬¦ã€‚ if (ch === '\"') &#123; while (next()) &#123; if (ch === '\"') &#123; next(); return string; &#125; else if (ch === '\\\\') &#123; next(); if (ch === 'u') &#123; uffff = 0; for (i = 0; i &lt; 4; i += 1) &#123; hex = parseInt(next(), 16); if (!isFinite(hex)) &#123; break; &#125; uffff = uffff * 16 + hex; &#125; string += String.fromCharCode(uffff); &#125; else if (typeof escapee[ch] === 'string') &#123; string += escapee[ch]; &#125; else &#123; break; &#125; &#125; else &#123; string += ch; &#125; &#125; &#125; error(\"Bad string\"); &#125;, white = function () &#123; // è·³è¿‡ç©ºç™½ while (ch &amp;&amp; ch &lt;= ' ') &#123; next(); &#125; &#125;, word = function () &#123; // true, false æˆ–è€… null switch (ch) &#123; case 't': next('t'); next('r'); next('u'); next('e'); return true; case 'f': next('f'); next('a'); next('l'); next('s'); next('e'); return false; case 'n': next('n'); next('u'); next('l'); next('l'); return null; &#125; error(\"Unexpected '\" + ch + \"'\"); &#125;, value, // å€¼å‡½æ•°çš„å ä½ç¬¦ã€‚ array = function () &#123; // è§£æä¸€ä¸ªæ•°ç»„å€¼ã€‚ var array = []; if (ch === '[') &#123; white(); if (ch === ']') &#123; next(']'); return array; // ç©ºæ•°ç»„ &#125; while (ch) &#123; array.push(value()); white(); if (ch === \"]\") &#123; next(']'); return array; &#125; next(','); white(); &#125; &#125; error(\"Bad array\"); &#125;, object = function () &#123; // è§£æä¸€ä¸ªå¯¹è±¡å€¼ var key, object = &#123;&#125;; if(ch === '&#123;') &#123; next('&#123;'); white(); if (ch === \"&#125;\") &#123; next('&#125;'); return object; // ç©ºå¯¹è±¡ &#125; while (ch) &#123; key = string(); white(); next(\":\"); object[key] = value(); white(); if(ch === '&#125;') &#123; next('&#125;'); return object; &#125; next(\",\"); white(); &#125; &#125; error(\"Bad object\"); &#125;; value = function () &#123; // è§£æä¸€ä¸ªJSONå€¼ã€‚å®ƒå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ•°å­—æˆ–ä¸€ä¸ªè¯ã€‚ white(); switch (ch) &#123; case '&#123;': return object(); case '[': return array(); case '\"': return string(); case \"-\": return number(); default: return ch &gt;= '0' &amp;&amp; ch &lt;= '9' ? number() : word() ; &#125; &#125;; // è¿”å›json_parse å‡½æ•°ã€‚å®ƒèƒ½è®¿é—®ä¸Šè¿°æ‰€æœ‰çš„å‡½æ•°å’Œå˜é‡ã€‚ return function(source, reviver) &#123; var result; text = source; at = 0; ch = ' '; result = value(); white(); if (ch) &#123; error(\"Syntax error\"); &#125; // å¦‚æœå­˜åœ¨reviver å‡½æ•°ï¼Œæˆ‘ä»¬å°±é€’å½’åœ°å¯¹è¿™ä¸ªæ–°ç»“æ„è°ƒç”¨walkå‡½æ•°ï¼Œ // å¼€å§‹æ—¶å…ˆåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„å¯åŠ¨å¯¹è±¡ï¼Œå¹¶ä»¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä½œä¸ºé”®åä¿å­˜ç»“æœï¼Œ // ç„¶åä¼ é€’æ¯ä¸ªé”®å€¼å¯¹ç»™reviverå‡½æ•°å»å¤„ç†å¯èƒ½å­˜åœ¨çš„è½¬æ¢ã€‚ // å¦‚æœæ²¡æœ‰reviverå‡½æ•°ï¼Œæˆ‘ä»¬å°±ç®€å•åœ°è¿”å›è¿™ä¸ªç»“æœã€‚ return typeof reviver === 'function' ? function walk(holder, key) &#123; var k, v, value = holder[key]; if (value &amp;&amp; typeof value === 'object') &#123; for (k in value) &#123; if (Object.hasOwnProperty.call(value, k)) &#123; v = walk(value, k); if (v !== undefined) &#123; value[k] = v; &#125; else &#123; delete value[k]; &#125; &#125; &#125; &#125; return reviver.call(holder, key, value); &#125;(&#123;'': result&#125;, '') : result; &#125;&#125;(); This is the end.æ­£æ–‡éƒ¨åˆ†åˆ°æ­¤ç»“æŸã€‚ç¬¬ä¸€æ¬¡å†™è¯»ä¹¦ç¬”è®°ï¼Œä¸€æ˜¯åŠ æ·±è‡ªå·±çš„å°è±¡ï¼ŒäºŒæ¥æ–¹ä¾¿ä»¥åæŸ¥é˜…ï¼Œæ¯•ç«Ÿçº¸å¼ æ²¡æœ‰æœç´¢åŠŸèƒ½ã€‚å¦‚æœä½ ä¹Ÿå–œæ¬¢è¿™ç¯‡æ–‡ç« æ¬¢è¿è½¬è½½ï¼Œä½†æœ¬æ–‡ä»£ç ç‰ˆæƒå±äºã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹ï¼Œå°éƒ¨åˆ†ä»£ç æ‰©å……æ˜¯ä¸ºäº†æ¼”ç¤ºä»£ç æ•ˆæœã€‚","categories":[{"name":"Notes","slug":"Notes","permalink":"https://mrzzcn.github.io/categories/Notes/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://mrzzcn.github.io/tags/Javascript/"},{"name":"Douglas-Crockford","slug":"Douglas-Crockford","permalink":"https://mrzzcn.github.io/tags/Douglas-Crockford/"},{"name":"æœ€ä½³å®è·µ","slug":"æœ€ä½³å®è·µ","permalink":"https://mrzzcn.github.io/tags/æœ€ä½³å®è·µ/"}]}]}